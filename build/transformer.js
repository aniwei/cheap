(()=>{var e={7149:(e,t,r)=>{r(8355),r(6438).Array.isArray},2861:(e,t,r)=>{r(8978),r(7863),r(7914),r(6050),r(8337),r(4674),r(2223),e.exports=r(6438).Map},1837:(e,t,r)=>{r(1489),e.exports=r(6438).Number.isNaN},2696:(e,t,r)=>{r(4712);var n=r(6438).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},2948:(e,t,r)=>{r(1780),e.exports=r(6438).Object.freeze},7567:(e,t,r)=>{r(6847),r(6438).Object.keys},7279:(e,t,r)=>{r(5828),r(6438).parseFloat},6560:(e,t,r)=>{r(9626),r(8978),r(2860),r(716),e.exports=r(6438).Symbol},4220:(e,t,r)=>{r(7863),r(7914),e.exports=r(4336).f("iterator")},9967:(e,t,r)=>{e.exports=r(4336).f("toPrimitive")},5219:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},2560:e=>{e.exports=function(){}},2832:e=>{e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},812:(e,t,r)=>{var n=r(4401);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},7076:(e,t,r)=>{var n=r(5838);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},4448:(e,t,r)=>{var n=r(5133),i=r(181),o=r(2917);e.exports=function(e){return function(t,r,a){var s,c=n(t),l=i(c.length),u=o(a,l);if(e&&r!=r){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}}},600:(e,t,r)=>{var n=r(8852),i=r(7001),o=r(6310),a=r(181),s=r(9244);e.exports=function(e,t){var r=1==e,c=2==e,l=3==e,u=4==e,p=6==e,f=5==e||p,y=t||s;return function(t,s,x){for(var d,m,h=o(t),g=i(h),v=n(s,x,3),E=a(g.length),T=0,S=r?y(t,E):c?y(t,0):void 0;E>T;T++)if((f||T in g)&&(m=v(d=g[T],T,h),e))if(r)S[T]=m;else if(m)switch(e){case 3:return!0;case 5:return d;case 6:return T;case 2:S.push(d)}else if(u)return!1;return p?-1:l||u?u:S}}},9742:(e,t,r)=>{var n=r(4401),i=r(5461),o=r(254)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},9244:(e,t,r)=>{var n=r(9742);e.exports=function(e,t){return new(n(e))(t)}},4968:(e,t,r)=>{var n=r(3417),i=r(254)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},3417:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},5933:(e,t,r)=>{"use strict";var n=r(8423).f,i=r(2087),o=r(953),a=r(8852),s=r(2832),c=r(5838),l=r(8839),u=r(322),p=r(5274),f=r(8219),y=r(5172).fastKey,x=r(6096),d=f?"_s":"size",m=function(e,t){var r,n=y(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var u=e((function(e,n){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[d]=0,null!=n&&c(n,r,e[l],e)}));return o(u.prototype,{clear:function(){for(var e=x(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[d]=0},delete:function(e){var r=x(this,t),n=m(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[d]--}return!!n},forEach:function(e){x(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!m(x(this,t),e)}}),f&&n(u.prototype,"size",{get:function(){return x(this,t)[d]}}),u},def:function(e,t,r){var n,i,o=m(e,t);return o?o.v=r:(e._l=o={i:i=y(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[d]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,r){l(e,t,(function(e,r){this._t=x(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?u(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,u(1))}),r?"entries":"values",!r,!0),p(t)}}},5874:(e,t,r)=>{var n=r(4968),i=r(7076);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},9373:(e,t,r)=>{"use strict";var n=r(6670),i=r(8535),o=r(5172),a=r(1984),s=r(2677),c=r(953),l=r(5838),u=r(2832),p=r(4401),f=r(1356),y=r(8423).f,x=r(600)(0),d=r(8219);e.exports=function(e,t,r,m,h,g){var v=n[e],E=v,T=h?"set":"add",S=E&&E.prototype,k={};return d&&"function"==typeof E&&(g||S.forEach&&!a((function(){(new E).entries().next()})))?(E=t((function(t,r){u(t,E,e,"_c"),t._c=new v,null!=r&&l(r,h,t[T],t)})),x("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in S)||g&&"clear"==e||s(E.prototype,e,(function(r,n){if(u(this,E,e),!t&&g&&!p(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i}))})),g||y(E.prototype,"size",{get:function(){return this._c.size}})):(E=m.getConstructor(t,e,h,T),c(E.prototype,r),o.NEED=!0),f(E,e),k[e]=E,i(i.G+i.W+i.F,k),g||m.setStrong(E,e,h),E}},6438:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},8852:(e,t,r)=>{var n=r(5219);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},7608:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},8219:(e,t,r)=>{e.exports=!r(1984)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},3802:(e,t,r)=>{var n=r(4401),i=r(6670).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},7956:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},6473:(e,t,r)=>{var n=r(4311),i=r(9820),o=r(6569);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),c=o.f,l=0;s.length>l;)c.call(e,a=s[l++])&&t.push(a);return t}},8535:(e,t,r)=>{var n=r(6670),i=r(6438),o=r(8852),a=r(2677),s=r(5509),c="prototype",l=function(e,t,r){var u,p,f,y=e&l.F,x=e&l.G,d=e&l.S,m=e&l.P,h=e&l.B,g=e&l.W,v=x?i:i[t]||(i[t]={}),E=v[c],T=x?n:d?n[t]:(n[t]||{})[c];for(u in x&&(r=t),r)(p=!y&&T&&void 0!==T[u])&&s(v,u)||(f=p?T[u]:r[u],v[u]=x&&"function"!=typeof T[u]?r[u]:h&&p?o(f,n):g&&T[u]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[c]=e[c],t}(f):m&&"function"==typeof f?o(Function.call,f):f,m&&((v.virtual||(v.virtual={}))[u]=f,e&l.R&&E&&!E[u]&&a(E,u,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},1984:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},5838:(e,t,r)=>{var n=r(8852),i=r(7904),o=r(2828),a=r(812),s=r(181),c=r(5298),l={},u={},p=e.exports=function(e,t,r,p,f){var y,x,d,m,h=f?function(){return e}:c(e),g=n(r,p,t?2:1),v=0;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(o(h)){for(y=s(e.length);y>v;v++)if((m=t?g(a(x=e[v])[0],x[1]):g(e[v]))===l||m===u)return m}else for(d=h.call(e);!(x=d.next()).done;)if((m=i(d,g,x.value,t))===l||m===u)return m};p.BREAK=l,p.RETURN=u},6670:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},5509:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},2677:(e,t,r)=>{var n=r(8423),i=r(6260);e.exports=r(8219)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},3879:(e,t,r)=>{var n=r(6670).document;e.exports=n&&n.documentElement},2484:(e,t,r)=>{e.exports=!r(8219)&&!r(1984)((function(){return 7!=Object.defineProperty(r(3802)("div"),"a",{get:function(){return 7}}).a}))},7001:(e,t,r)=>{var n=r(3417);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},2828:(e,t,r)=>{var n=r(210),i=r(254)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},5461:(e,t,r)=>{var n=r(3417);e.exports=Array.isArray||function(e){return"Array"==n(e)}},4401:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},7904:(e,t,r)=>{var n=r(812);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},8248:(e,t,r)=>{"use strict";var n=r(2087),i=r(6260),o=r(1356),a={};r(2677)(a,r(254)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},8839:(e,t,r)=>{"use strict";var n=r(4742),i=r(8535),o=r(1331),a=r(2677),s=r(210),c=r(8248),l=r(1356),u=r(6123),p=r(254)("iterator"),f=!([].keys&&"next"in[].keys()),y="keys",x="values",d=function(){return this};e.exports=function(e,t,r,m,h,g,v){c(r,t,m);var E,T,S,k=function(e){if(!f&&e in I)return I[e];switch(e){case y:case x:return function(){return new r(this,e)}}return function(){return new r(this,e)}},N=t+" Iterator",b=h==x,L=!1,I=e.prototype,A=I[p]||I["@@iterator"]||h&&I[h],C=A||k(h),P=h?b?k("entries"):C:void 0,K="Array"==t&&I.entries||A;if(K&&(S=u(K.call(new e)))!==Object.prototype&&S.next&&(l(S,N,!0),n||"function"==typeof S[p]||a(S,p,d)),b&&A&&A.name!==x&&(L=!0,C=function(){return A.call(this)}),n&&!v||!f&&!L&&I[p]||a(I,p,C),s[t]=C,s[N]=d,h)if(E={values:b?C:k(x),keys:g?C:k(y),entries:P},v)for(T in E)T in I||o(I,T,E[T]);else i(i.P+i.F*(f||L),t,E);return E}},322:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},210:e=>{e.exports={}},4742:e=>{e.exports=!0},5172:(e,t,r)=>{var n=r(9191)("meta"),i=r(4401),o=r(5509),a=r(8423).f,s=0,c=Object.isExtensible||function(){return!0},l=!r(1984)((function(){return c(Object.preventExtensions({}))})),u=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},p=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},onFreeze:function(e){return l&&p.NEED&&c(e)&&!o(e,n)&&u(e),e}}},2087:(e,t,r)=>{var n=r(812),i=r(82),o=r(7956),a=r(4566)("IE_PROTO"),s=function(){},c="prototype",l=function(){var e,t=r(3802)("iframe"),n=o.length;for(t.style.display="none",r(3879).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l[c][o[n]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(s[c]=n(e),r=new s,s[c]=null,r[a]=e):r=l(),void 0===t?r:i(r,t)}},8423:(e,t,r)=>{var n=r(812),i=r(2484),o=r(752),a=Object.defineProperty;t.f=r(8219)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},82:(e,t,r)=>{var n=r(8423),i=r(812),o=r(4311);e.exports=r(8219)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,c=0;s>c;)n.f(e,r=a[c++],t[r]);return e}},1033:(e,t,r)=>{var n=r(6569),i=r(6260),o=r(5133),a=r(752),s=r(5509),c=r(2484),l=Object.getOwnPropertyDescriptor;t.f=r(8219)?l:function(e,t){if(e=o(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},6309:(e,t,r)=>{var n=r(5133),i=r(1743).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(n(e))}},1743:(e,t,r)=>{var n=r(5081),i=r(7956).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},9820:(e,t)=>{t.f=Object.getOwnPropertySymbols},6123:(e,t,r)=>{var n=r(5509),i=r(6310),o=r(4566)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},5081:(e,t,r)=>{var n=r(5509),i=r(5133),o=r(4448)(!1),a=r(4566)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),c=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~o(l,r)||l.push(r));return l}},4311:(e,t,r)=>{var n=r(5081),i=r(7956);e.exports=Object.keys||function(e){return n(e,i)}},6569:(e,t)=>{t.f={}.propertyIsEnumerable},7331:(e,t,r)=>{var n=r(8535),i=r(6438),o=r(1984);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},9709:(e,t,r)=>{var n=r(6670).parseFloat,i=r(4269).trim;e.exports=1/n(r(459)+"-0")!=-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},6260:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},953:(e,t,r)=>{var n=r(2677);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},1331:(e,t,r)=>{e.exports=r(2677)},643:(e,t,r)=>{"use strict";var n=r(8535),i=r(5219),o=r(8852),a=r(5838);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),null==e?new this:(r=[],t?(n=0,s=o(c,arguments[2],2),a(e,!1,(function(e){r.push(s(e,n++))}))):a(e,!1,r.push,r),new this(r))}})}},4398:(e,t,r)=>{"use strict";var n=r(8535);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},5274:(e,t,r)=>{"use strict";var n=r(6670),i=r(6438),o=r(8423),a=r(8219),s=r(254)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},1356:(e,t,r)=>{var n=r(8423).f,i=r(5509),o=r(254)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},4566:(e,t,r)=>{var n=r(6308)("keys"),i=r(9191);e.exports=function(e){return n[e]||(n[e]=i(e))}},6308:(e,t,r)=>{var n=r(6438),i=r(6670),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(4742)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},3172:(e,t,r)=>{var n=r(9383),i=r(7608);e.exports=function(e){return function(t,r){var o,a,s=String(i(t)),c=n(r),l=s.length;return c<0||c>=l?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},4269:(e,t,r)=>{var n=r(8535),i=r(7608),o=r(1984),a=r(459),s="["+a+"]",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(e,t,r){var i={},s=o((function(){return!!a[e]()||"​"!="​"[e]()})),c=i[e]=s?t(p):a[e];r&&(i[r]=c),n(n.P+n.F*s,"String",i)},p=u.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},459:e=>{e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},2917:(e,t,r)=>{var n=r(9383),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},9383:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},5133:(e,t,r)=>{var n=r(7001),i=r(7608);e.exports=function(e){return n(i(e))}},181:(e,t,r)=>{var n=r(9383),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},6310:(e,t,r)=>{var n=r(7608);e.exports=function(e){return Object(n(e))}},752:(e,t,r)=>{var n=r(4401);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},9191:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},6096:(e,t,r)=>{var n=r(4401);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},7816:(e,t,r)=>{var n=r(6670),i=r(6438),o=r(4742),a=r(4336),s=r(8423).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},4336:(e,t,r)=>{t.f=r(254)},254:(e,t,r)=>{var n=r(6308)("wks"),i=r(9191),o=r(6670).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},5298:(e,t,r)=>{var n=r(4968),i=r(254)("iterator"),o=r(210);e.exports=r(6438).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},8355:(e,t,r)=>{var n=r(8535);n(n.S,"Array",{isArray:r(5461)})},2293:(e,t,r)=>{"use strict";var n=r(2560),i=r(322),o=r(210),a=r(5133);e.exports=r(8839)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},6050:(e,t,r)=>{"use strict";var n=r(5933),i=r(6096),o="Map";e.exports=r(9373)(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return n.def(i(this,o),0===e?0:e,t)}},n,!0)},1489:(e,t,r)=>{var n=r(8535);n(n.S,"Number",{isNaN:function(e){return e!=e}})},4712:(e,t,r)=>{var n=r(8535);n(n.S+n.F*!r(8219),"Object",{defineProperty:r(8423).f})},1780:(e,t,r)=>{var n=r(4401),i=r(5172).onFreeze;r(7331)("freeze",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},6847:(e,t,r)=>{var n=r(6310),i=r(4311);r(7331)("keys",(function(){return function(e){return i(n(e))}}))},8978:()=>{},5828:(e,t,r)=>{var n=r(8535),i=r(9709);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},7863:(e,t,r)=>{"use strict";var n=r(3172)(!0);r(8839)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},9626:(e,t,r)=>{"use strict";var n=r(6670),i=r(5509),o=r(8219),a=r(8535),s=r(1331),c=r(5172).KEY,l=r(1984),u=r(6308),p=r(1356),f=r(9191),y=r(254),x=r(4336),d=r(7816),m=r(6473),h=r(5461),g=r(812),v=r(4401),E=r(6310),T=r(5133),S=r(752),k=r(6260),N=r(2087),b=r(6309),L=r(1033),I=r(9820),A=r(8423),C=r(4311),P=L.f,K=A.f,F=b.f,_=n.Symbol,B=n.JSON,D=B&&B.stringify,O="prototype",w=y("_hidden"),M=y("toPrimitive"),z={}.propertyIsEnumerable,j=u("symbol-registry"),q=u("symbols"),$=u("op-symbols"),G=Object[O],R="function"==typeof _&&!!I.f,U=n.QObject,V=!U||!U[O]||!U[O].findChild,H=o&&l((function(){return 7!=N(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=P(G,t);n&&delete G[t],K(e,t,r),n&&e!==G&&K(G,t,n)}:K,W=function(e){var t=q[e]=N(_[O]);return t._k=e,t},J=R&&"symbol"==typeof _.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof _},Z=function(e,t,r){return e===G&&Z($,t,r),g(e),t=S(t,!0),g(r),i(q,t)?(r.enumerable?(i(e,w)&&e[w][t]&&(e[w][t]=!1),r=N(r,{enumerable:k(0,!1)})):(i(e,w)||K(e,w,k(1,{})),e[w][t]=!0),H(e,t,r)):K(e,t,r)},Y=function(e,t){g(e);for(var r,n=m(t=T(t)),i=0,o=n.length;o>i;)Z(e,r=n[i++],t[r]);return e},Q=function(e){var t=z.call(this,e=S(e,!0));return!(this===G&&i(q,e)&&!i($,e))&&(!(t||!i(this,e)||!i(q,e)||i(this,w)&&this[w][e])||t)},X=function(e,t){if(e=T(e),t=S(t,!0),e!==G||!i(q,t)||i($,t)){var r=P(e,t);return!r||!i(q,t)||i(e,w)&&e[w][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=F(T(e)),n=[],o=0;r.length>o;)i(q,t=r[o++])||t==w||t==c||n.push(t);return n},te=function(e){for(var t,r=e===G,n=F(r?$:T(e)),o=[],a=0;n.length>a;)!i(q,t=n[a++])||r&&!i(G,t)||o.push(q[t]);return o};R||(s((_=function(){if(this instanceof _)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===G&&t.call($,r),i(this,w)&&i(this[w],e)&&(this[w][e]=!1),H(this,e,k(1,r))};return o&&V&&H(G,e,{configurable:!0,set:t}),W(e)})[O],"toString",(function(){return this._k})),L.f=X,A.f=Z,r(1743).f=b.f=ee,r(6569).f=Q,I.f=te,o&&!r(4742)&&s(G,"propertyIsEnumerable",Q,!0),x.f=function(e){return W(y(e))}),a(a.G+a.W+a.F*!R,{Symbol:_});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)y(re[ne++]);for(var ie=C(y.store),oe=0;ie.length>oe;)d(ie[oe++]);a(a.S+a.F*!R,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=_(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!R,"Object",{create:function(e,t){return void 0===t?N(e):Y(N(e),t)},defineProperty:Z,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=l((function(){I.f(1)}));a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return I.f(E(e))}}),B&&a(a.S+a.F*(!R||l((function(){var e=_();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(v(t)||void 0!==e)&&!J(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!J(t))return t}),n[1]=t,D.apply(B,n)}}),_[O][M]||r(2677)(_[O],M,_[O].valueOf),p(_,"Symbol"),p(Math,"Math",!0),p(n.JSON,"JSON",!0)},2223:(e,t,r)=>{r(643)("Map")},4674:(e,t,r)=>{r(4398)("Map")},8337:(e,t,r)=>{var n=r(8535);n(n.P+n.R,"Map",{toJSON:r(5874)("Map")})},2860:(e,t,r)=>{r(7816)("asyncIterator")},716:(e,t,r)=>{r(7816)("observable")},7914:(e,t,r)=>{r(2293);for(var n=r(6670),i=r(2677),o=r(210),a=r(254)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],u=n[l],p=u&&u.prototype;p&&!p[a]&&i(p,a,l),o[l]=o.Array}},8632:(e,t,r)=>{r(7149)},662:(e,t,r)=>{e.exports=r(2861)},7210:(e,t,r)=>{e.exports=r(1837)},7403:(e,t,r)=>{e.exports=r(2948)},9736:(e,t,r)=>{r(7567)},8032:(e,t,r)=>{r(7279)},5062:(e,t,r)=>{e.exports=r(6560)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{default:()=>Pr});const e=require("typescript");var t=r.n(e),i=(r(9736),r(8632),r(8032),r(7403)),o=r.n(i);const a=!1,s=null,c=void 0,l=-1,u="undefined",p="function",f=typeof window!==u?window:c,y=(typeof document!==u&&document,typeof globalThis!==u?globalThis:typeof r.g!==u&&r.g,typeof self!==u&&self,o()({}),o()([]),"");function x(e){return typeof e===p}function d(e){return e!==s&&"object"==typeof e}function m(e){return"number"==typeof e&&!isNaN(e)}function h(e,t){for(let r in e)if(t(e[r],r)===a)break}function g(e,t){return d(e)?d(t)?(h(t,(function(t,r){e[r]=t})),e):e:t}function v(e,t,r){return g(g(e,t),r)}var E=r(2696),T=r(6560),S=r(4220);function k(e){return k="function"==typeof T&&"symbol"==typeof S?function(e){return typeof e}:function(e){return e&&"function"==typeof T&&e.constructor===T&&e!==T.prototype?"symbol":typeof e},k(e)}var N=r(9967);function b(e,t,r){return n=function(e,t){if("object"!=k(e)||!e)return e;var r=e[N];if(void 0!==r){var n=r.call(e,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==k(n)?n:String(n))in e?E(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var n}var L=r(662),I=r.n(L);const A=require("path");var C=r.n(A);function P(e,t,r){if(!e)return;const{length:n}=e;if(n)if(r)for(let r=n-1;r>=0&&t(e[r],r)!==a;r--);else for(let r=0;r<n&&t(e[r],r)!==a;r++);}function K(e,t,r){return function(e,t,r){let n=l;return P(e,(function(e,i){if(r===a?e==t:e===t)return n=i,a})),n}(e,t,r)>=0}function F(e,t){const r=[];return P(e,((e,n)=>{K(t,e)||r.push(e)})),r}function _(e,t,r,n,i){for(let n=0;n<e.length;n++)if(e[n].name===t&&e[n].path===r)return e[n];const o={name:t,path:r,default:i,formatName:n};return e.push(o),o}const B="accessof",D="addressof",O="offsetof",w="memcpy",M="sizeof",z="move",j="static_cast",q="assert",$="indexOf",G="reinterpret_cast",R="structAccess",U="CTypeEnumWrite",V="CTypeEnumRead",H="definedMetaProperty",W="symbolStructAddress",J="symbolStruct",Z="symbolStructMaxBaseTypeByteLength",Y="symbolStructLength",Q="symbolStructKeysMeta",X="cheap/std/sizeof",ee="cheap/function/definedMetaProperty",te="cheap/std/memory",re="cheap/symbol",ne="cheap/std/structAccess",ie="createThreadFromClass",oe="createThreadFromFunction",ae="createThreadFromModule",se="cheap/thread/thread",ce="array",le="bit",ue="pointer",pe="anyptr",fe="nullptr",ye="multiPointer",xe="union",de="struct",me="defined",he="args",ge="enableArgs",ve="asm",Ee="prototype",Te="struct",Se="union",ke="type",Ne="pointer",be="array",Le="bit",Ie="ignore",Ae="deasync",Ce="make",Pe="unmake",Ke="malloc",Fe="calloc",_e="realloc",Be="aligned_alloc",De="free",Oe="Allocator",we="cheap/heap",Me="cheap/std/make",ze="cheap/std/unmake",je="zzztype__",qe="zzzlevel__",$e="zzzstruct__",Ge="___LINE__",Re="__LINE__",Ue="___FILE__",Ve="__FILE__";function He(e,t,r){if(e.length){const n=[];e.forEach((e=>{n.push(et.context.factory.createImportSpecifier(!1,et.context.factory.createIdentifier(e.name),et.context.factory.createIdentifier(e.formatName)))}));const i=et.context.factory.createImportDeclaration(void 0,et.context.factory.createImportClause(!1,void 0,et.context.factory.createNamedImports(n)),et.context.factory.createStringLiteral(t));r.push(i)}}function We(e,t){return`cheap__${e}__${t}`}var Je,Ze;!function(e){e[e.NONE=0]="NONE",e[e.CALL=1]="CALL",e[e.EqualLeft=2]="EqualLeft",e[e.EqualRight=3]="EqualRight",e[e.SingleArrowRight=4]="SingleArrowRight",e[e.PointerPlusMinusIgnore=5]="PointerPlusMinusIgnore",e[e.AddressOf=6]="AddressOf",e[e.Parameter=7]="Parameter",e[e.VariableDeclaration=8]="VariableDeclaration"}(Je||(Je={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.FUNCTION=1]="FUNCTION",e[e.IF=2]="IF",e[e.LOOP=3]="LOOP"}(Ze||(Ze={}));class Ye{constructor(){b(this,"stage",void 0),b(this,"data",void 0)}}class Qe{constructor(e=Ze.UNKNOWN){b(this,"type",Ze.UNKNOWN),b(this,"topDeclaration",[]),b(this,"definedStruct",[]),b(this,"stages",[]),b(this,"locals",new(I())),b(this,"funcs",new(I())),b(this,"synchronize",!1),this.type=e}pushStage(e,t){const r=new Ye;r.stage=e,r.data=t,this.stages.push(r)}popStage(){this.stages.pop()}lookupStage(e){for(let t=this.stages.length-1;t>=0;t--)if(this.stages[t].stage===e)return this.stages[t]}getCurrentStage(){return this.stages[this.stages.length-1]}hasStruct(e){return K(this.definedStruct,e)}getDeclaration(e){return this.topDeclaration.find((t=>t.name===e))}}const Xe=new class{constructor(){b(this,"options",void 0),b(this,"compilerOptions",void 0),b(this,"cheapCompilerOptions",void 0),b(this,"program",void 0),b(this,"context",void 0),b(this,"typeChecker",void 0),b(this,"visitor",void 0),b(this,"currentFile",void 0),b(this,"currentFilePath",void 0),b(this,"imports",void 0),b(this,"memoryImports",void 0),b(this,"symbolImports",void 0),b(this,"stdImports",void 0),b(this,"identifierImports",void 0),b(this,"stacks",void 0),b(this,"identifierIndex",void 0)}start(e){this.currentFile=e,this.identifierIndex=0,this.memoryImports=[],this.symbolImports=[],this.stdImports=[],this.identifierImports=[],this.stacks=[],this.pushStack(),this.imports=function(e,r,n,i){const o=new(I());return e.statements.forEach((a=>{if(t().isImportDeclaration(a)){const s=C().extname(a.moduleSpecifier.text);if(!s||".ts"===s){const s=function(e,r,n){var i;return null===(i=t().resolveModuleName(n,r,e.getCompilerOptions(),t().sys).resolvedModule)||void 0===i?void 0:i.resolvedFileName}(r,e.fileName,a.moduleSpecifier.text.split("!").pop());if(s){const e=o.get(s)||new(I());a.importClause&&t().isImportClause(a.importClause)&&(a.importClause.name&&t().isIdentifier(a.importClause.name)&&e.set("default",a.importClause.name.escapedText),a.importClause.namedBindings&&(t().isNamedImports(a.importClause.namedBindings)?a.importClause.namedBindings.elements.forEach((r=>{r.propertyName&&t().isIdentifier(r.propertyName)?(e.set(r.propertyName.escapedText,r.name.escapedText),i.set(r.propertyName.escapedText,n.getSymbolAtLocation(r.propertyName))):(e.set(r.name.escapedText,r.name.escapedText),i.set(r.name.escapedText,n.getSymbolAtLocation(r.name)))})):t().isNamespaceImport(a.importClause.namedBindings)&&e.set("all",a.importClause.namedBindings.name.escapedText))),o.set(s,e)}}}})),o}(e,this.program,this.typeChecker,this.getCurrentStack().locals),this.currentFilePath=C().relative(this.options.projectPath,e.fileName)}end(e){const t=this.getCurrentStack(),r=[];return P(t.topDeclaration,(e=>{r.push(this.context.factory.createVariableStatement(void 0,this.context.factory.createVariableDeclarationList([this.context.factory.createVariableDeclaration(e.formatName,void 0,void 0,e.initializer)])))})),He(this.memoryImports,te,r),He(this.symbolImports,re,r),this.identifierImports.length&&this.identifierImports.forEach((e=>{const t=this.context.factory.createImportDeclaration(void 0,this.context.factory.createImportClause(!1,e.default?this.context.factory.createIdentifier(e.formatName):void 0,e.default?void 0:this.context.factory.createNamedImports([this.context.factory.createImportSpecifier(!1,this.context.factory.createIdentifier(e.name),this.context.factory.createIdentifier(e.formatName))])),this.context.factory.createStringLiteral(e.path));r.push(t)})),r.length&&(e=this.context.factory.updateSourceFile(e,[...r,...e.statements])),this.popStack(),e}pushStack(e){this.stacks.push(new Qe(e))}popStack(){this.stacks.pop()}getCurrentStack(){return this.stacks[this.stacks.length-1]}pushStage(e,t={}){var r;null===(r=this.getCurrentStack())||void 0===r||r.pushStage(e,t)}popStage(){var e;null===(e=this.getCurrentStack())||void 0===e||e.popStage()}getCurrentStage(){var e;return null===(e=this.getCurrentStack())||void 0===e?void 0:e.getCurrentStage()}lookupStage(e){for(let t=this.stacks.length-1;t>=0;t--){const r=this.stacks[t].lookupStage(e);if(r)return r}}hasStruct(e){for(let t=this.stacks.length-1;t>=0;t--){const r=this.stacks[t].hasStruct(e);if(r)return r}return!1}addStruct(e){this.getCurrentStack().definedStruct.push(e)}getDeclaration(e){var t;return null===(t=this.getCurrentStack())||void 0===t?void 0:t.getDeclaration(e)}addDeclaration(e,t){const r=this.getCurrentStack();for(let t=0;t<r.topDeclaration.length;t++)if(r.topDeclaration[t].name===e)return r.topDeclaration[t];const n={name:e,formatName:We(e,this.identifierIndex++),initializer:t};return r.topDeclaration.push(n),n}addModuleDeclaration(e,t){const r=this.stacks[0];for(let t=0;t<r.topDeclaration.length;t++)if(r.topDeclaration[t].name===e)return r.topDeclaration[t];const n={name:e,formatName:We(e,this.identifierIndex++),initializer:t};return r.topDeclaration.push(n),n}addMemoryImport(e){if(e===V)return this.addIdentifierImport(e,"cheap/ctypeEnumRead",!1);if(e===U)return this.addIdentifierImport(e,"cheap/ctypeEnumWrite",!1);let{formatName:t}=_(this.memoryImports,e,te,!1===this.options.formatIdentifier?e:We(e,this.identifierIndex++),!1);return this.context.factory.createIdentifier(t)}addSymbolImport(e){let{formatName:t}=_(this.symbolImports,e,re,!1===this.options.formatIdentifier?e:We(e,this.identifierIndex++),!1);return this.context.factory.createIdentifier(t)}addIdentifierImport(e,t,r){let{formatName:n}=_(this.identifierImports,e,t,!1===this.options.formatIdentifier?e:We(e,this.identifierIndex++),r);return this.context.factory.createIdentifier(n)}isIdentifier(e,t){return function(e,t){return e===t||0===e.indexOf(`cheap__${t}__`)}(e,t)}addLocal(e,t){var r;null===(r=this.getCurrentStack())||void 0===r||r.locals.set(e,t)}addFunc(e,t){var r;null===(r=this.getCurrentStack())||void 0===r||r.funcs.set(e,t)}lookupLocal(e){for(let t=this.stacks.length-1;t>=0;t--){const r=this.stacks[t].locals.get(e);if(r)return r}}lookupFunc(e){for(let t=this.stacks.length-1;t>=0;t--){const r=this.stacks[t].funcs.get(e);if(r)return r}}lookupSynchronized(){for(let e=this.stacks.length-1;e>=0;e--){const t=this.stacks[e];if(t.type===Ze.FUNCTION)return t.synchronize}return!1}},et=Xe,tt=["i32","i64","f32","f64","uint8","uint16","uint32","uint64","int8","int16","int32","int64","float","float64","double","char","size","void","atomic_char","atomic_uint8","atomic_uint16","atomic_uint32","atomic_int8","atomic_int16","atomic_int32","atomic_int64","atomic_uint64"],rt=[Te,Se,Ie,ke,Ne,be,Le,"inline",Ae],nt=["float","float64","double","f32","f64"],it=["i64","int64","uint64","atomic_int64","atomic_uint64"],ot=["uint8","atomic_uint8","uint16","atomic_uint16","uint32","atomic_uint32","uint64","atomic_uint64"],at={2:"uint8",3:"atomic_uint8",4:"char",5:"atomic_char",6:"uint16",7:"atomic_uint16",8:"uint32",9:"atomic_uint32",10:"uint64",11:"int8",12:"atomic_int8",13:"int16",14:"atomic_int16",15:"int32",16:"atomic_int32",17:"int64",18:"float",19:"double",20:"pointer",1:"void",0:"nullptr",22:"atomic_uint64",21:"atomic_int64"},st={typeptr:20,i32:15,i64:17,f32:18,f64:19};h(at,((e,t)=>{st[e]=+t}));const ct=F(F(tt,nt),it);var lt=r(7210),ut=r.n(lt);const pt={2:1,3:1,4:1,5:1,6:2,7:2,8:4,9:4,10:8,11:1,12:1,13:2,14:2,15:4,16:4,17:8,18:4,19:8,20:4,0:4,1:4,22:8,21:8};var ft=r(5062),yt=r.n(ft);yt()("Struct");const xt=yt()("StructLength"),dt=yt()("StructMaxBaseTypeByteLength");function mt(e){return e!==c}let ht;function gt(){if(mt(ht))return ht;const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),ht=256===new Int16Array(e)[0],ht}function vt(e){let t=0;return e.forEach((e=>{if(e[1])pt[20]>t&&(t=pt[20]);else if(x(e.getTypeMeta)){const r=e.getTypeMeta();r.maxBaseTypeByteLength>t&&(t=r.maxBaseTypeByteLength)}else x(e[0])?e[0][dt]>t&&(t=e[0][dt]):pt[e[0]]>t&&(t=pt[e[0]])})),t}function Et(e){let t=0;return e.forEach((e=>{if(e[1])pt[20]>t&&(t=pt[20]);else if(x(e.getTypeMeta)){const r=e.getTypeMeta();r.length>t&&(t=r.length)}else x(e[0])?e[0][xt]>t&&(t=e[0][xt]):pt[e[0]]>t&&(t=pt[e[0]])})),t}function Tt(e,t,r,n=0){let i=0,o=0,a=n;for(e&&t&&P(e,(e=>{const r=t.get(e);let s=0,c=0;if(r[1])s=pt[20],c=pt[20];else if(x(r.getTypeMeta)){const e=r.getTypeMeta();s=e.maxBaseTypeByteLength,c=e.length}else if(x(r[0]))s=r[0].prototype[dt],c=r[0].prototype[xt];else{if(r[5]&&r[0]===i&&o>=r[6])return r[7]=a,r[8]=8*pt[i]-o,o-=r[6],0===r[6]&&(r[6]=o,i=0,o=0),gt()&&(r[8]=8*pt[i]-r[8]-r[6]),!0;s=pt[r[0]],c=pt[r[0]]}for(;n%s!=0;)n++;r[7]=n,r[5]?(i=r[0],r[8]=0,o=8*pt[i]-r[6],gt()&&(r[8]=8*pt[i]-r[6])):(i=0,o=0),a=n,n+=r[3]?c*r[4]:c}));n%r!=0;)n++;return n}var St;yt()("StructAddress"),yt()("StructKeysQueue"),yt()("StructKeysMeta"),yt()("StructKeysInstance"),yt()("StructProxyRevoke"),new(I()),function(e){e[e.CSTRUCT=0]="CSTRUCT",e[e.CUNION=1]="CUNION",e[e.INLINE_OBJECT=2]="INLINE_OBJECT"}(St||(St={}));const kt=new(I()),Nt=[];function bt(e){if(!e)return!1;let r=!1;return P(e.modifiers,(e=>{var n;if(e.kind===t().SyntaxKind.Decorator&&(null===(n=e.expression)||void 0===n?void 0:n.kind)===t().SyntaxKind.Identifier&&e.expression.escapedText===Te)return r=!0,!1})),r}function Lt(e){if(!e)return!1;let r=!1;return P(e.modifiers,(e=>{var n;if(e.kind===t().SyntaxKind.Decorator&&(null===(n=e.expression)||void 0===n?void 0:n.kind)===t().SyntaxKind.Identifier&&e.expression.escapedText===Se)return r=!0,!1})),r}function It(e,r){var n;if(e.aliasSymbol){var i,o;const n=e.aliasSymbol.escapedName;if(n===ce&&null!==(i=e.aliasTypeArguments[1])&&void 0!==i&&i.isNumberLiteral())r[3]=1,r[4]=(r[4]?r[4]:1)*e.aliasTypeArguments[1].value,It(e.aliasTypeArguments[0],r);else if(n===le&&null!==(o=e.aliasTypeArguments[1])&&void 0!==o&&o.isNumberLiteral())r[5]=1,r[6]=e.aliasTypeArguments[1].value,It(e.aliasTypeArguments[0],r);else if(n===ue)r[2]++,r[1]=1,It(e.aliasTypeArguments[0],r);else if(n===de||n===xe){const i=function(e,r){const n=new(I()),i=[];if(e.symbol.members&&e.symbol.members.forEach(((e,r)=>{if(e.flags&t().SymbolFlags.Property&&e.valueDeclaration&&t().isPropertySignature(e.valueDeclaration)){const t=Nt[Nt.length-1];t.treePath.push(r);const o={0:1,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,has:!1,typeIdentifier:"",symbol:null,name:r};It(et.typeChecker.getTypeOfSymbol(e),o),o.has&&(n.set(r,o),i.push(r)),t.treePath.pop()}})),n.size){const t=vt(n);if(!t)return null;const o=r===St.CUNION?Et(n):Tt(i,n,t,0);return kt.set(e.symbol,{maxBaseTypeByteLength:t,length:o,meta:n,symbol:e.symbol,parent:null,structType:St.INLINE_OBJECT,definedClassParent:Nt[Nt.length-1].struct,name:e.symbol.name}),kt.get(e.symbol)}return null}(e.aliasTypeArguments[0],n===xe?St.CUNION:St.CSTRUCT);if(i){r.has=!0;const e=Nt[Nt.length-1];e.inlineStructPathMap.set(i.symbol,e.treePath.join(".")),r.getTypeMeta=()=>i}}else e.aliasSymbol.valueDeclaration&&(t().isEnumDeclaration(e.aliasSymbol.valueDeclaration)||t().isEnumMember(e.aliasSymbol.valueDeclaration))?(r.has=!0,r[0]=15):K(tt,n)&&(r.has=!0,r[0]=st[n])}else e.symbol&&(bt(e.symbol.valueDeclaration)||Lt(e.symbol.valueDeclaration))?r[1]||e.symbol!==r.symbol?(r.has=!0,r.typeIdentifier=e.symbol.escapedName,r.getTypeMeta=()=>Ct(e.symbol)):r.has=!1:null!==(n=e.symbol)&&void 0!==n&&n.valueDeclaration&&(t().isEnumDeclaration(e.symbol.valueDeclaration)||t().isEnumMember(e.symbol.valueDeclaration))?(r.has=!0,r[0]=15):r[1]?(r.has=!0,r[0]=1):e.isUnion()&&It(e.types[0],r)}function At(e){var r;if(!e.valueDeclaration||!t().isClassDeclaration(e.valueDeclaration))return void kt.set(e,null);const n=e.valueDeclaration;if(!bt(n)&&!Lt(n))return void kt.set(e,null);const i=Lt(n)?St.CUNION:St.CSTRUCT,o=new(I()),a=[],s=new(I()),c={maxBaseTypeByteLength:0,length:0,meta:null,symbol:e,parent:null,structType:i,name:e.name},l=[];let u;if(Nt.push({treePath:l,struct:c,inlineStructPathMap:s}),null!==(r=n.heritageClauses)&&void 0!==r&&r.length)for(let e=0;e<n.heritageClauses.length;e++){const r=n.heritageClauses[e];if(r.token===t().SyntaxKind.ExtendsKeyword&&1===r.types.length){let e=et.typeChecker.getSymbolAtLocation(r.types[0].expression);u=kt.get(e),u||(At(e),u=kt.get(e))}}if(e.members&&e.members.forEach(((r,n)=>{if(r.flags&t().SymbolFlags.Property&&r.valueDeclaration&&t().isPropertyDeclaration(r.valueDeclaration)){var i;const s=r.valueDeclaration;l.push(n);const c={0:1,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,has:!1,typeIdentifier:"",symbol:e,name:n};It(et.typeChecker.getTypeOfSymbol(r),c),null!==(i=s.modifiers)&&void 0!==i&&i.length&&function(e,r){for(let n=0;n<e.length;n++)if(e[n].kind===t().SyntaxKind.Decorator){const i=e[n];let o=!1;if(t().isCallExpression(i.expression)&&t().isIdentifier(i.expression.expression)){const e=i.expression.expression.escapedText;if(e===ke)r.has=!0,t().isIdentifier(i.expression.arguments[0])||t().isExpressionWithTypeArguments(i.expression.arguments[0])?(r.typeIdentifier=t().isIdentifier(i.expression.arguments[0])?i.expression.arguments[0].escapedText:i.expression.arguments[0].expression.escapedText,r.getTypeMeta=()=>{const e=t().isIdentifier(i.expression.arguments[0])?et.typeChecker.getTypeAtLocation(i.expression.arguments[0]):et.typeChecker.getTypeAtLocation(i.expression.arguments[0].expression);return e?Ct(e.symbol):{maxBaseTypeByteLength:0,length:0,structType:St.CSTRUCT,meta:null,symbol:null,name:""}}):i.expression.arguments[0].kind===t().SyntaxKind.ThisKeyword?(r.typeIdentifier=i.parent.parent.name.escapedText,r.getTypeMeta=()=>Ct(et.typeChecker.getTypeAtLocation(i.parent.parent).symbol)):t().isPropertyAccessExpression(i.expression.arguments[0])&&(r[0]=st[i.expression.arguments[0].name.escapedText]);else if(e===Ne)r[1]=1,i.expression.arguments.length?t().isIdentifier(i.expression.arguments[0])&&(r[2]=+i.expression.arguments[0].escapedText):r[2]=1;else if(e===be){if(r[3]=1,r[4]=0,t().isNumericLiteral(i.expression.arguments[0]))r[4]=+i.expression.arguments[0].text;else if(t().isIdentifier(i.expression.arguments[0])){const e=et.typeChecker.getSymbolAtLocation(i.expression.arguments[0]);e&&t().isVariableDeclaration(e.valueDeclaration)&&e.valueDeclaration.initializer&&t().isNumericLiteral(e.valueDeclaration.initializer)&&(r[4]=+e.valueDeclaration.initializer.text)}ut()(r[4])&&(r[4]=0)}else e===Le?(r[5]=1,t().isIdentifier(i.expression.arguments[0])&&(r[6]=+i.expression.arguments[0].escapedText)):e===Ie&&(o=!0,t().isCallExpression(i.expression)&&i.expression.arguments.length&&!tr(et.visitor(i.expression.arguments[0]),et.visitor)&&(o=!1))}else t().isIdentifier(i.expression)&&i.expression.escapedText===Ie&&(o=!0);o&&(r.has=!1)}}(s.modifiers,c),c.has&&(o.set(n,c),a.push(n)),l.pop()}})),o.size){var p,f;const t=Math.max(vt(o),null!==(p=null===(f=u)||void 0===f?void 0:f.maxBaseTypeByteLength)&&void 0!==p?p:0);if(!t)return void kt.set(e,null);let r=0;u&&(r=u.length),v(c,{maxBaseTypeByteLength:t,length:i===St.CUNION?Et(o):Tt(a,o,t,r),meta:o,parent:u,inlineStructPathMap:s}),kt.set(e,c)}else u?(v(c,{maxBaseTypeByteLength:u.maxBaseTypeByteLength,length:u.length,meta:o,parent:u}),kt.set(e,c)):kt.set(e,null);Nt.pop()}function Ct(e){return e?(kt.has(e)||At(e),kt.get(e)):null}function Pt(e){return null!=Ct(e)}function Kt(e,t){if(wt(e)&&wt(t))return!(!Dt(e)&&!Dt(t))||Rt(e)===Rt(t)&&Ut(e)===Ut(t);if(Ft(e)&&Ft(t))return $t(e)===$t(t);if(Bt(e)&&Bt(t))return zt(e)===zt(t);if(e.symbol&&t.symbol)return e.symbol===t.symbol;if(e.aliasSymbol&&t.aliasSymbol){var r,n;if(e.aliasSymbol.escapedName===ue&&t.aliasSymbol.escapedName===pe||e.aliasSymbol.escapedName===pe&&t.aliasSymbol.escapedName===ue)return!0;if(!e.aliasTypeArguments&&!t.aliasTypeArguments)return function(e,t){return e===ue&&t===pe||e===pe&&t===ue||"any"===e||"any"===t||"void"===e||"void"===t||e===t}(e.aliasSymbol.escapedName,t.aliasSymbol.escapedName);if((null===(r=e.aliasTypeArguments)||void 0===r?void 0:r.length)===(null===(n=t.aliasTypeArguments)||void 0===n?void 0:n.length)){for(let r=0;r<e.aliasTypeArguments.length;r++)if(!Kt(e.aliasTypeArguments[r],t.aliasTypeArguments[r]))return!1;return!0}return!1}return!(!e.intrinsicName||!t.intrinsicName)&&e.intrinsicName===t.intrinsicName}function Ft(e){if(!e)return!1;if(wt(e))return!0;if(e.aliasSymbol)return e.aliasSymbol.escapedName===pe||e.aliasSymbol.escapedName===ye||m(st[e.aliasSymbol.escapedName]);if(e.isIntersection()){const t=Vt(e.getProperty(je));if(t)return m(st[t.replace(/\*$/g,"")])}return!1}function _t(e){return!!e&&wt(e)&&(e.aliasSymbol&&e.aliasTypeArguments&&Ft(e.aliasTypeArguments[0])||!e.symbol&&!e.aliasSymbol&&!Mt(e))}function Bt(e,t=!1){if(!e)return!1;if(e.symbol)return Pt(e.symbol);if(e.aliasSymbol)return e.aliasSymbol.escapedName===de||e.aliasSymbol.escapedName===xe;if(e.isIntersection()){var r,n,i;const o=Vt(e.getProperty(qe));if(!t&&o&&o>0)return!1;const a=e.getProperty(je);if(null!=a&&null!==(r=a.links)&&void 0!==r&&null!==(r=r.type)&&void 0!==r&&r.symbol)return Bt(a.links.type);if(null!=a&&null!==(n=a.links)&&void 0!==n&&null!==(n=n.type)&&void 0!==n&&n.aliasSymbol&&null!=a&&null!==(i=a.links)&&void 0!==i&&null!==(i=i.type)&&void 0!==i&&i.aliasTypeArguments&&(a.links.type.aliasSymbol.escapedName===de||a.links.type.aliasSymbol.escapedName===xe))return Bt(a.links.type.aliasTypeArguments[0]);if(e.getProperty($e))for(let t=0;t<e.types.length;t++)if(e.types[t].symbol&&Pt(e.types[t].symbol))return!0}return!1}function Dt(e){return!!e.aliasSymbol&&e.aliasSymbol.escapedName===pe}function Ot(e){return!!e.aliasSymbol&&e.aliasSymbol.escapedName===ye}function wt(e){if(!e)return!1;if(Dt(e)||Ot(e))return!0;if(e.aliasSymbol)return e.aliasSymbol.escapedName===ue;if(e.symbol)return e.symbol.escapedName===ue;if(e.isIntersection()){const t=Vt(e.getProperty(qe));if(null!=t)return t>0}return!1}function Mt(e){if(!e)return!1;if(wt(e)){if(Dt(e)||Ot(e))return!1;if(e.aliasSymbol&&e.aliasTypeArguments)return Bt(e.aliasTypeArguments[0]);if(!e.symbol&&!e.aliasSymbol&&e.isIntersection()){const t=Vt(e.getProperty(qe));return!(t&&t>1)&&Bt(e,!0)}}return!1}function zt(e){if(e.aliasSymbol&&e.aliasTypeArguments){if(e.aliasSymbol.escapedName===de||e.aliasSymbol.escapedName===xe||e.aliasSymbol.escapedName===ce||e.aliasSymbol.escapedName===ue)return zt(e.aliasTypeArguments[0])}else{if(e.symbol)return Ct(e.symbol);if(e.isIntersection()){var t,r,n;const i=e.getProperty(je);if(null!=i&&null!==(t=i.links)&&void 0!==t&&null!==(t=t.type)&&void 0!==t&&t.symbol)return zt(i.links.type);if(null!=i&&null!==(r=i.links)&&void 0!==r&&null!==(r=r.type)&&void 0!==r&&r.aliasSymbol&&null!=i&&null!==(n=i.links)&&void 0!==n&&null!==(n=n.type)&&void 0!==n&&n.aliasTypeArguments&&(i.links.type.aliasSymbol.escapedName===de||i.links.type.aliasSymbol.escapedName===xe))return zt(i.links.type.aliasTypeArguments[0]);if(e.getProperty($e))for(let t=0;t<e.types.length;t++)if(e.types[t].symbol&&Pt(e.types[t].symbol))return Ct(e.types[t].symbol)}}}function jt(e){return Ut(e)>1?null:e.aliasSymbol&&e.aliasTypeArguments&&!wt(e.aliasTypeArguments[0])&&zt(e.aliasTypeArguments[0])||!e.symbol&&!e.aliasSymbol&&zt(e)}function qt(e){if(e.aliasSymbol)return e.aliasSymbol.escapedName;if(e.isIntersection()){const t=Vt(e.getProperty(je));if(t)return/\*+$/.test(t)?at[20]:t}}function $t(e){if(wt(e))return 20;const t=qt(e);return t?st[t]:void 0}function Gt(e){let t=e.aliasSymbol&&e.aliasTypeArguments&&$t(e.aliasTypeArguments[0]);if(!m(t)&&!e.symbol&&!e.aliasSymbol&&e.isIntersection()){if(Ut(e)>1)return 20;const t=Vt(e.getProperty(je));if(t)return/\*{2}$/.test(t)?20:st[t.replace(/\**$/,"")]}return t}function Rt(e){if(wt(e)){if(e.aliasSymbol&&e.aliasTypeArguments)return Rt(e.aliasTypeArguments[0]);{const t=Vt(e.getProperty(je));return t?st[t.replace(/\**$/,"")]:zt(e)}}return Bt(e)?zt(e):Ft(e)?$t(e):void 0}function Ut(e){if(wt(e)&&e.isIntersection()){const t=Vt(e.getProperty(qe));if(t)return t}return 0}function Vt(e){var t,r;if(e)return null!=e&&null!==(t=e.links)&&void 0!==t&&null!==(t=t.type)&&void 0!==t&&t.value?e.links.type.value:null!=e&&null!==(r=e.valueDeclaration)&&void 0!==r&&null!==(r=r.type)&&void 0!==r&&r.literal?e.valueDeclaration.type.literal.text:void 0}function Ht(e){return t().isBinaryExpression(e)&&e.operatorToken.kind===t().SyntaxKind.EqualsToken?Ht(e.right):e}function Wt(e){let t=Xt(e);for(;t&&t!==e;){if(wt(et.typeChecker.getTypeAtLocation(t)))return!0;t=t.parent}return!!t&&!!wt(et.typeChecker.getTypeAtLocation(t))}function Jt(e){if(t().isBinaryExpression(e)){const t=et.typeChecker.getTypeAtLocation(e.right);return wt(t)?t:Jt(e.left)}return et.typeChecker.getTypeAtLocation(e)}function Zt(e){if(t().isBinaryExpression(e)&&e.operatorToken.kind===t().SyntaxKind.EqualsToken)return Zt(e.left)||Zt(e.right);let r=et.typeChecker.getTypeAtLocation(e);return!!wt(r)||(r=Jt(e),!!wt(r)||(t().isPropertyAccessExpression(e)?Wt(e):t().isElementAccessExpression(e)&&t().isPropertyAccessExpression(e.expression)?Wt(e.expression):!!t().isElementAccessExpression(e)&&Zt(e.expression)))}function Yt(e){return!(e.flags&t().NodeFlags.Synthesized)}function Qt(e){return t().isElementAccessExpression(e)&&Zt(e.expression)}function Xt(e){return t().isPropertyAccessExpression(e)||t().isCallExpression(e)||t().isElementAccessExpression(e)?Xt(e.expression):e}function er(e,r){const n=e.declarations;if(null!=n&&n.length)for(let e=0;e<n.length;e++){var i;const o=n[e];if((t().isFunctionDeclaration(o)||t().isMethodDeclaration(o))&&o.parameters&&null!==(i=o.parameters[r])&&void 0!==i&&i.initializer)return o.parameters[r].initializer}}function tr(e,r){return t().visitNode(e,(function e(n){if(t().isParenthesizedExpression(n))return t().visitNode(n.expression,e);if(t().isPrefixUnaryExpression(n))return n.operator!==t().SyntaxKind.ExclamationToken||!t().visitNode(n.operand,e);if(t().isBinaryExpression(n)){const r=t().visitNode(n.left,e),i=t().visitNode(n.right,e);return n.operatorToken.kind===t().SyntaxKind.AmpersandAmpersandToken?r&&i:n.operatorToken.kind!==t().SyntaxKind.BarBarToken||r||i}{const e=t().visitNode(n,r);return e.kind===t().SyntaxKind.TrueKeyword||e.kind!==t().SyntaxKind.FalseKeyword&&(t().isNumericLiteral(e)?0!=+e.text:!t().isStringLiteral(e)||""!==e.text)}}))}function rr(e,r){if(t().isBinaryExpression(e)&&e.operatorToken.kind===t().SyntaxKind.PlusToken&&(t().isNumericLiteral(e.right)||t().isNumericLiteral(e.left))&&t().isNumericLiteral(r)){if(t().isNumericLiteral(e.right))return et.context.factory.createBinaryExpression(e.left,t().SyntaxKind.PlusToken,et.context.factory.createNumericLiteral(+e.right.text+ +r.text));if(t().isNumericLiteral(e.left))return et.context.factory.createBinaryExpression(et.context.factory.createNumericLiteral(+e.left.text+ +r.text),t().SyntaxKind.PlusToken,e.right)}return et.context.factory.createBinaryExpression(e,t().SyntaxKind.PlusToken,r)}function nr(e){if(!e)return"";const r=et.typeChecker.getTypeAtLocation(e);if(r.aliasSymbol&&K(tt,r.aliasSymbol.escapedName))return r.aliasSymbol.escapedName;if(t().isBinaryExpression(e)){const r=nr(e.left),n=nr(e.right);return K(nt,r)?r:K(nt,n)?n:K(it,r)?e.operatorToken.kind===t().SyntaxKind.MinusToken?"int64":r:K(it,n)?e.operatorToken.kind===t().SyntaxKind.MinusToken?"int64":n:e.operatorToken.kind===t().SyntaxKind.MinusToken?"int32":"uint32"}if(r.flags&t().TypeFlags.BigInt||r.flags&t().TypeFlags.BigIntLiteral){if(r.flags&t().TypeFlags.BigIntLiteral&&e.parent&&t().isPrefixUnaryExpression(e.parent)&&e.parent.operator===t().SyntaxKind.MinusToken)return"int64";if(r.flags&t().TypeFlags.BigInt&&t().isCallExpression(e)&&e.arguments[0]){const t=nr(e.arguments[0]);if(!K(ot,t))return"int64"}return"uint64"}if(r.flags&t().TypeFlags.Number||r.flags&t().TypeFlags.NumberLiteral){if(r.flags&t().TypeFlags.NumberLiteral){if((r.value+"").indexOf(".")>-1)return"double";if(e.parent&&t().isPrefixUnaryExpression(e.parent)&&e.parent.operator===t().SyntaxKind.MinusToken)return"int32";if(r.flags&t().TypeFlags.Number&&t().isCallExpression(e)&&e.arguments[0]){const t=nr(e.arguments[0]);if(!K(ot,t))return"int32"}return"uint32"}return"double"}if(r.isUnion())for(let e=0;e<r.types.length;e++)if(r.types[e].aliasSymbol&&K(tt,r.types[e].aliasSymbol.escapedName))return r.types[e].aliasSymbol.escapedName;return""}function ir(e,r){var n;if(null!==(n=e.members)&&void 0!==n&&n.length)for(let n=0;n<e.members.length;n++)if(t().isMethodDeclaration(e.members[n])&&t().isIdentifier(e.members[n].name)&&e.members[n].name.escapedText===r)return e.members[n];if(e.heritageClauses)for(let n=0;n<e.heritageClauses.length;n++){const i=e.heritageClauses[n].types;for(let e=0;e<i.length;e++)if(t().isExpressionWithTypeArguments(i[e])){const n=et.typeChecker.getTypeAtLocation(i[e].expression);if(null!=n&&n.symbol&&n.symbol.valueDeclaration&&(t().isClassDeclaration(n.symbol.valueDeclaration)||t().isInterfaceDeclaration(n.symbol.valueDeclaration))){const e=ir(n.symbol.valueDeclaration,r);if(e)return e}}}}function or(e){if(!e)return!1;if(e.modifiers)for(let r=0;r<e.modifiers.length;r++){const n=e.modifiers[r];if(t().isDecorator(n)&&t().isIdentifier(n.expression)&&n.expression.escapedText===Ae)return!0}if(e.name&&t().isIdentifier(e.name)&&t().isClassDeclaration(e.parent)&&e.parent.heritageClauses)for(let r=0;r<e.parent.heritageClauses.length;r++)for(let r=0;r<e.parent.heritageClauses.length;r++){const n=e.parent.heritageClauses[r].types;for(let r=0;r<n.length;r++)if(t().isExpressionWithTypeArguments(n[r])){const i=et.typeChecker.getTypeAtLocation(n[r].expression);if(null!=i&&i.symbol&&i.symbol.valueDeclaration&&(t().isClassDeclaration(i.symbol.valueDeclaration)||t().isInterfaceDeclaration(i.symbol.valueDeclaration))){const t=ir(i.symbol.valueDeclaration,e.name.escapedText);if(t)return or(t)}}}return!1}function ar(e,t){const r=C().relative(C().dirname(e),t);return/\.\.\//.test(r)?r:"./"+r}function sr(e){const t=et.addIdentifierImport(H,ee,!0),r=et.addSymbolImport(J),n=et.addSymbolImport(Z),i=et.addSymbolImport(Y),o=et.addSymbolImport(Q),a=[];return a.push(et.context.factory.createVariableStatement(void 0,et.context.factory.createVariableDeclarationList([et.context.factory.createVariableDeclaration(et.context.factory.createIdentifier("map"),void 0,void 0,et.context.factory.createNewExpression(et.context.factory.createIdentifier("Map"),void 0,[]))]))),e.meta.forEach(((e,t)=>{let r;if(x(e.getTypeMeta))if(e.typeIdentifier){var n;const t=null===(n=e.getTypeMeta())||void 0===n?void 0:n.symbol.valueDeclaration.getSourceFile();var i;r=t&&t!==et.currentFile?et.addIdentifierImport(e.typeIdentifier,ar(et.currentFile.fileName,t.fileName),!(null!==(i=et.typeChecker.getSymbolAtLocation(t).exports)&&void 0!==i&&i.has(e.typeIdentifier))):et.context.factory.createIdentifier(function(e){if(!et.hasStruct(e)){const{formatName:t}=et.addDeclaration(e);return t}return e}(e.typeIdentifier))}else{const t=e.getTypeMeta();if(!t||t.structType!==St.INLINE_OBJECT)return!0;{const e=sr(t);e.push(et.context.factory.createReturnStatement(et.context.factory.createIdentifier(Ee))),r=et.context.factory.createCallExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createFunctionExpression(void 0,void 0,void 0,void 0,[et.context.factory.createParameterDeclaration(void 0,void 0,et.context.factory.createIdentifier(Ee))],void 0,et.context.factory.createBlock(e,!0))),void 0,[et.context.factory.createObjectLiteralExpression()])}}else r=et.context.factory.createNumericLiteral(e[0]);a.push(et.context.factory.createExpressionStatement(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.context.factory.createIdentifier("map"),et.context.factory.createIdentifier("set")),void 0,[et.context.factory.createStringLiteral(t),et.context.factory.createObjectLiteralExpression([et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(0),r),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(1),et.context.factory.createNumericLiteral(e[1])),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(2),et.context.factory.createNumericLiteral(e[2])),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(3),et.context.factory.createNumericLiteral(e[3])),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(4),et.context.factory.createNumericLiteral(e[4])),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(5),et.context.factory.createNumericLiteral(e[5])),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(6),et.context.factory.createNumericLiteral(e[6])),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(7),et.context.factory.createNumericLiteral(e[7])),et.context.factory.createPropertyAssignment(et.context.factory.createNumericLiteral(8),et.context.factory.createNumericLiteral(e[8]))])])))})),a.push(et.context.factory.createExpressionStatement(et.context.factory.createCallExpression(t,void 0,[et.context.factory.createIdentifier(Ee),r,et.context.factory.createTrue()]))),a.push(et.context.factory.createExpressionStatement(et.context.factory.createCallExpression(t,void 0,[et.context.factory.createIdentifier(Ee),n,et.context.factory.createNumericLiteral(e.maxBaseTypeByteLength)]))),a.push(et.context.factory.createExpressionStatement(et.context.factory.createCallExpression(t,void 0,[et.context.factory.createIdentifier(Ee),i,et.context.factory.createNumericLiteral(e.length)]))),a.push(et.context.factory.createExpressionStatement(et.context.factory.createCallExpression(t,void 0,[et.context.factory.createIdentifier(Ee),o,et.context.factory.createIdentifier("map")]))),a}function cr(e){return t().isParenthesizedExpression(e)?t().visitNode(e.expression,cr):t().isPrefixUnaryExpression(e)?t().visitNode(e.operand,cr):t().isBinaryExpression(e)?!!t().visitNode(e.left,cr)&&t().visitNode(e.right,cr):!!(t().isCallExpression(e)&&t().isIdentifier(e.expression)&&e.expression.escapedText===me||e.kind===t().SyntaxKind.TrueKeyword||e.kind===t().SyntaxKind.FalseKeyword)}function lr(e){return t().isParenthesizedExpression(e)?t().visitNode(e.expression,lr):t().isPrefixUnaryExpression(e)?t().visitNode(e.operand,lr):t().isBinaryExpression(e)?t().visitNode(e.left,lr)||t().visitNode(e.right,lr):!(!t().isCallExpression(e)||!t().isIdentifier(e.expression)||e.expression.escapedText!==me)}function ur(e,r,n,i=9e3,o=0,a=0){!o&&r.pos>-1&&(o=r.getStart()),!a&&r.end>-1&&(a=r.getEnd());const s=t().formatDiagnostic({file:e,start:o,length:a-o,category:t().DiagnosticCategory.Error,code:i,messageText:n},{getCurrentDirectory:t().sys.getCurrentDirectory,getCanonicalFileName:function(e){return e},getNewLine:function(){return t().sys.newLine}});if(et.options.reportError){const t=e.getLineAndCharacterOfPosition(o),r=e.getLineAndCharacterOfPosition(a);et.options.reportError({file:e.fileName,loc:{start:{line:t.line+1,column:t.character+1},end:{line:r.line+1,column:r.character+1}},code:i,message:s})}else console.error(s)}function pr(e,t){return e!=s&&e.toString?e.toString():t!==c?t:y}function fr(e,t){let r=e.meta.get(t);if(r)return r;let n=e.parent;for(;n;){if(r=n.meta.get(t),r)return r;n=e.parent}return null}function yr(e,r){if(e===Ge||e===Re){const{line:e}=t().getLineAndCharacterOfPosition(et.currentFile,r.getStart());return et.context.factory.createNumericLiteral(e+1)}if(e===Ue||e===Ve){const{formatName:e}=et.addModuleDeclaration("fileName",et.context.factory.createStringLiteral(et.currentFilePath));return et.context.factory.createIdentifier(e)}if(mt(et.cheapCompilerOptions.defined[e])){const t=et.cheapCompilerOptions.defined[e];if(function(e){return"boolean"==typeof e}(t))return t?et.context.factory.createTrue():et.context.factory.createFalse();if(m(t))return et.context.factory.createNumericLiteral(t);if(function(e){return"string"==typeof e}(t))return et.context.factory.createStringLiteral(t);if(r)return ur(et.currentFile,r,`the type(${typeof t}) of defined not support`),r}else if(r)return ur(et.currentFile,r,`cannot found the defined(${e})`),r}function xr(e,r,n){if(t().isTypeReferenceNode(r))if(t().isIdentifier(r.typeName)&&r.typeName.symbol){const n=et.typeChecker.getTypeOfSymbol(r.typeName.symbol);if(Ft(n))e.push(et.context.factory.createNumericLiteral($t(n)));else if(n.aliasSymbol){const t=n.aliasSymbol.escapedName;e.push(et.context.factory.createIdentifier(t))}else if(n.symbol&&n.symbol.valueDeclaration&&t().isClassDeclaration(n.symbol.valueDeclaration)){var i;let t;const r=null===(i=n.symbol.valueDeclaration)||void 0===i?void 0:i.getSourceFile();var o;t=r!==et.currentFile?et.addIdentifierImport(n.symbol.escapedName,ar(et.currentFile.fileName,r.fileName),!(null!==(o=et.typeChecker.getSymbolAtLocation(r).exports)&&void 0!==o&&o.has(n.symbol.escapedName))):et.context.factory.createIdentifier(n.symbol.escapedName),e.push(t)}else e.push(et.context.factory.createIdentifier(n.symbol.escapedName))}else e.push(et.context.factory.createIdentifier("undefined"));else if(t().isLiteralTypeNode(r))if(t().isNumericLiteral(r.literal))e.push(et.context.factory.createNumericLiteral(+r.literal.text));else if(t().isStringLiteral(r.literal))if(/^defined\(([a-zA-Z_$][a-zA-Z0-9_$]*)\)$/.test(r.literal.text)){const t=yr(r.literal.text.match(/^defined\(([a-zA-Z_$][a-zA-Z0-9_$]*)\)$/)[1],n);t?e.push(t):e.push(et.context.factory.createIdentifier("undefined"))}else if(/^moduleId\(([0-9]+)\)$/.test(r.literal.text)){const i=+r.literal.text.match(/^moduleId\(([0-9]+)\)$/)[1],o=n.arguments[i];if(o){var a;const i=null===(a=et.typeChecker.getTypeAtLocation(o).symbol.valueDeclaration)||void 0===a?void 0:a.getSourceFile();if(i){var s;const o=et.typeChecker.getTypeAtLocation(n.expression),a=null==o||null===(s=o.symbol)||void 0===s||null===(s=s.valueDeclaration)||void 0===s?void 0:s.getSourceFile().fileName;if(et.cheapCompilerOptions.defined.ENABLE_THREADS&&et.cheapCompilerOptions.defined.ENABLE_THREADS_SPLIT&&a.indexOf(se)>=0&&(o.symbol.escapedName===ie||o.symbol.escapedName===oe||o.symbol.escapedName===ae)){const a=o.symbol.escapedName===ie?"class":o.symbol.escapedName===ae?"module":"function";let s=t().isIdentifier(n.arguments[0])?n.arguments[0].escapedText:t().isPropertyAccessExpression(n.arguments[0])?n.arguments[0].name.escapedText:"unknown";if("class"===a||"function"===a){var c;let e;if(t().isIdentifier(n.arguments[0])?e=et.typeChecker.getTypeAtLocation(n.arguments[0]):t().isPropertyAccessExpression(n.arguments[0])&&(e=et.typeChecker.getTypeAtLocation(n.arguments[0].name)),null!==(c=e)&&void 0!==c&&null!==(c=c.symbol)&&void 0!==c&&c.valueDeclaration)if(t().isClassDeclaration(e.symbol.valueDeclaration)){if(!e.symbol.valueDeclaration.name)return ur(et.currentFile,r,"The thread class must have a class name"),r;s=e.symbol.valueDeclaration.name.escapedText}else if(t().isFunctionDeclaration(e.symbol.valueDeclaration)){if(!e.symbol.valueDeclaration.name)return ur(et.currentFile,r,"The thread function must has a function name"),r;s=e.symbol.valueDeclaration.name.escapedText}}let l=`${s}Thread`;n.arguments[1]&&t().isObjectLiteralExpression(n.arguments[1])&&n.arguments[1].properties.forEach((e=>{if(t().isPropertyAssignment(e)&&t().isIdentifier(e.name)&&"name"===e.name.escapedText){let t=e.initializer.getText();t&&(t=t.replace(/^['|"]/,""),t=t.replace(/['|"]$/,""),t&&(l=t))}}));const u=`cheap-worker-loader?type=${a}&point=${s}&name=${l}`,p=et.addIdentifierImport("worker",`${u}!${ar(et.currentFile.fileName,i.fileName)}`,!0);e.push(et.context.factory.createNewExpression(p,void 0,[]))}else e.push(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.context.factory.createIdentifier("require"),et.context.factory.createIdentifier("resolve")),void 0,[et.context.factory.createStringLiteral(ar(et.currentFile.fileName,i.fileName))]))}}}else{let i=r.literal.text.replace(/defined\(([a-zA-Z_$][a-zA-Z0-9_$]*)\)/g,((e,r)=>function(e,r){if(e===Ge||e===Re){const{line:e}=t().getLineAndCharacterOfPosition(et.currentFile,r.getStart());return pr(e+1)}return e===Ue||e===Ve?et.currentFilePath:mt(et.cheapCompilerOptions.defined[e])?pr(et.cheapCompilerOptions.defined[e],""):""}(r,n)));e.push(et.context.factory.createStringLiteral(i))}else r.literal.kind===t().SyntaxKind.TrueKeyword?e.push(et.context.factory.createTrue()):r.literal.kind===t().SyntaxKind.FalseKeyword&&e.push(et.context.factory.createFalse())}function dr(e,t){var r;const n=t;let i=n.symbol,o="";n.structType===St.INLINE_OBJECT&&(i=n.definedClassParent.symbol,o=n.definedClassParent.inlineStructPathMap.get(n.symbol));const a=null===(r=i.valueDeclaration)||void 0===r?void 0:r.getSourceFile();if(a){let t;var s;t=a!==et.currentFile?et.addIdentifierImport(i.escapedName,ar(et.currentFile.fileName,a.fileName),!(null!==(s=et.typeChecker.getSymbolAtLocation(a).exports)&&void 0!==s&&s.has(i.escapedName))):et.context.factory.createIdentifier(i.escapedName);const r=[e,t];return o&&r.push(et.context.factory.createStringLiteral(o)),et.context.factory.createCallExpression(et.addIdentifierImport(R,ne,!0),void 0,r)}}function mr(e){if(Bt(e)){const t=zt(e);if(t)return t.length}else{if(Ft(e))return pt[$t(e)];if(e.aliasSymbol){var t,r;const n=e.aliasSymbol.escapedName;if(n===ce&&null!==(t=e.aliasTypeArguments[1])&&void 0!==t&&t.isNumberLiteral())return mr(e.aliasTypeArguments[0])*e.aliasTypeArguments[1].value;if(n===le&&null!==(r=e.aliasTypeArguments[1])&&void 0!==r&&r.isNumberLiteral())return e.aliasTypeArguments[1].value}}return 0}function hr(e,r){let n="";t().isIdentifier(e.expression)?n=e.expression.escapedText:t().isPropertyAccessExpression(e.expression)&&(n=e.expression.name.escapedText);const i=et.typeChecker.getResolvedSignature(e),o=null==i?void 0:i.getDeclaration();if(o&&function(e){if(!e)return!1;for(let t=0;t<e.length;t++)if(e[t].name.escapedText===he)return!0;return!1}(o.typeParameters)){const n=et.typeChecker.signatureToSignatureDeclaration(i,t().SyntaxKind.CallSignature,function(e,r){if(null==e||Yt(e))return e;for(e=t().getOriginalNode(e);e;){if(Yt(e))return e;e=t().getOriginalNode(e)}}(function(e){for(function(e){return e.kind===t().SyntaxKind.JSDocTypedefTag||e.kind===t().SyntaxKind.JSDocCallbackTag||e.kind===t().SyntaxKind.JSDocEnumTag}(e)&&(e=e.parent.parent);;){if(!(e=e.parent))return;switch(e.kind){case t().SyntaxKind.SourceFile:case t().SyntaxKind.MethodDeclaration:case t().SyntaxKind.MethodSignature:case t().SyntaxKind.FunctionDeclaration:case t().SyntaxKind.FunctionExpression:case t().SyntaxKind.GetAccessor:case t().SyntaxKind.SetAccessor:case t().SyntaxKind.ClassDeclaration:case t().SyntaxKind.InterfaceDeclaration:case t().SyntaxKind.EnumDeclaration:case t().SyntaxKind.ModuleDeclaration:return e}}}(e)),t().NodeBuilderFlags.WriteTypeArgumentsOfSignature|t().NodeBuilderFlags.IgnoreErrors|t().NodeBuilderFlags.WriteTypeParametersInQualifiedName|t().NodeBuilderFlags.UseAliasDefinedOutsideCurrentScope|t().NodeBuilderFlags.MultilineObjectLiterals|t().NodeBuilderFlags.OmitParameterModifiers);if(null!=n&&n.typeArguments){const i=function(e,t){let r=-1;for(let t=0;t<e.length;t++)if(e[t].name.escapedText===he){r=t;break}if(r>-1)return t[r]}(o.typeParameters,n.typeArguments);if(i&&function(e,r,n){for(let i=0;i<e.length;i++){const o=e[i];if(o.name.escapedText===ge&&o.default){const e=[];if(xr(e,r[i],n),e[0].kind===t().SyntaxKind.FalseKeyword||t().isStringLiteral(e[0])&&""===e[0].text||t().isNumericLiteral(e[0])&&"0"===e[0].text)return!1;break}}return!0}(o.typeParameters,n.typeArguments,e)){var a;const n=[];let c=((null===(a=o.parameters)||void 0===a?void 0:a.length)||0)-e.arguments.length;for(;c>0;){var s;n.push(null!==(s=er(et.typeChecker.getSymbolAtLocation(o.name),e.arguments.length+n.length))&&void 0!==s?s:et.context.factory.createIdentifier("undefined")),c--}return t().isTupleTypeNode(i)?i.elements.forEach((t=>{c<0?c++:xr(n,t,e)})):c<0?c++:xr(n,i,e),t().visitNode(et.context.factory.createCallExpression(e.expression,void 0,[...e.arguments,...n]),r)}}}if(t().isIdentifier(e.expression))if(n!==M||et.lookupFunc(M)){if(n===D&&!et.lookupFunc(D)){const n=e.arguments[0];if(t().isCallExpression(n)&&(t().isIdentifier(n.expression)&&n.expression.escapedText===B||t().isElementAccessExpression(n.expression)&&t().isIdentifier(n.expression.expression)&&et.isIdentifier(n.expression.expression.escapedText,V)||t().isIdentifier(n.expression)&&et.isIdentifier(n.expression.escapedText,R)))return t().visitNode(n.arguments[0],r);var c;if(t().isIdentifier(n))return Pt(null===(c=et.typeChecker.getTypeAtLocation(n))||void 0===c?void 0:c.symbol)?et.context.factory.createElementAccessExpression(t().visitNode(n,r),et.addSymbolImport(W)):(ur(et.currentFile,n,"addressof only support with struct instance Identifier"),e);if(t().isPropertyAccessExpression(n)||t().isCallExpression(n)&&function(e){return!!t().isPropertyAccessExpression(e.expression)&&(wt(et.typeChecker.getTypeAtLocation(e.expression.expression))&&e.expression.name.escapedText===$)}(n)||t().isElementAccessExpression(n)&&wt(et.typeChecker.getTypeAtLocation(n.expression))){const i=t().visitNode(n,r);if(t().isCallExpression(i)&&(t().isIdentifier(i.expression)&&et.isIdentifier(i.expression.escapedText,R)||t().isPropertyAccessExpression(i.expression)&&et.isIdentifier(i.expression.name.escapedText,R)))return i.arguments[0];if(t().isCallExpression(i)&&t().isElementAccessExpression(i.expression)&&(t().isIdentifier(i.expression.expression)&&et.isIdentifier(i.expression.expression.escapedText,V)||t().isPropertyAccessExpression(i.expression.expression)&&et.isIdentifier(i.expression.expression.name.escapedText,V)))return i.arguments[0];if(t().isPropertyAccessExpression(i)){let r=et.typeChecker.getTypeAtLocation(n.expression),o=zt(r);if(!o)return r=et.typeChecker.getTypeAtLocation(n),o=zt(r),o?et.context.factory.createElementAccessExpression(i,et.addSymbolImport(W)):(ur(et.currentFile,n,"addressof only support with struct instance or struct property"),e);const a=fr(o,i.name.escapedText);return a?a[5]?(ur(et.currentFile,n,"addressof not support with bit field property"),e):a[7]?et.context.factory.createBinaryExpression(et.context.factory.createElementAccessExpression(i.expression,et.addSymbolImport(W)),t().SyntaxKind.PlusToken,et.context.factory.createNumericLiteral(a[7])):et.context.factory.createElementAccessExpression(i.expression,et.addSymbolImport(W)):(ur(et.currentFile,e,`struct ${o.symbol.escapedName} not has property ${i.name.escapedText}`),e)}return ur(et.currentFile,n,"invalid operation"),e}if(t().isElementAccessExpression(n)){const i=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[n.expression]),r);let o,a=0;const s=et.typeChecker.getTypeAtLocation(n);return Ft(s)?a=pt[$t(s)]:Bt(s)?a=zt(s).length:function(e){var t;return e.aliasSymbol&&e.aliasSymbol.escapedName===ce&&(null===(t=e.aliasTypeArguments[1])||void 0===t?void 0:t.isNumberLiteral())}(s)&&(a=mr(s.aliasTypeArguments[0])*s.aliasTypeArguments[1].value),a?(t().isNumericLiteral(n.argumentExpression)?+n.argumentExpression.text&&(o=et.context.factory.createNumericLiteral(+n.argumentExpression.text*a)):o=et.context.factory.createBinaryExpression(t().visitNode(n.argumentExpression,r),t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(a)),o?et.context.factory.createBinaryExpression(i,t().SyntaxKind.PlusToken,o):i):(ur(et.currentFile,n,"type mismatch"),e)}{const i=et.typeChecker.getTypeAtLocation(n);return i.symbol&&Pt(i.symbol)?et.context.factory.createElementAccessExpression(t().visitNode(n,r),et.addSymbolImport(W)):(ur(et.currentFile,n,"addressof only support in related to struct"),e)}}if(n===B&&!et.lookupFunc(B)&&Zt(e.arguments[0])){const n=e.arguments[0];if(t().isCallExpression(n)&&t().isIdentifier(n.expression)&&n.expression.escapedText===D)return t().visitNode(n.arguments[0],r);const i=Jt(n);if(wt(i)){const o=t().visitNode(n,r);return Mt(i)?dr(o,jt(i)):_t(i)?et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),Gt(i)),void 0,[o]):(ur(et.currentFile,e,"accessof only support in cheap builtin type or struct type"),e)}return ur(et.currentFile,e,`the type of ${n.getText()} is not pointer`),e}if(n===O&&!et.lookupFunc(O)){if(2===e.arguments.length){const r=et.typeChecker.getTypeAtLocation(e.arguments[0]);if(Bt(r)&&t().isStringLiteral(e.arguments[1])){const t=Ct(r.symbol),n=fr(t,e.arguments[1].text);return n?et.context.factory.createNumericLiteral(n[7]):(ur(et.currentFile,e,`struct ${t.name} has not property ${e.arguments[1].text}`),e)}return ur(et.currentFile,e,"offsetof invalid arguments"),e}return ur(et.currentFile,e,"offsetof invalid arguments"),e}if(n===j&&!et.lookupFunc(j)){var l;const n=t().visitNode(e.arguments[0],r);let i=nr(e.arguments[0]);const o=e.typeArguments[0]&&(null===(l=et.typeChecker.getTypeAtLocation(e.typeArguments[0]))||void 0===l||null===(l=l.aliasSymbol)||void 0===l?void 0:l.escapedName)||"",a=et.typeChecker.getTypeAtLocation(e.arguments[0]);if(K(ot,i)&&(a.flags&t().TypeFlags.BigIntLiteral||a.flags&t().TypeFlags.NumberLiteral)&&pt[st[o]]===pt[st[i]]&&(i=o),K(ct,o)){let e=n;if(K(nt,i))e=et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(et.context.factory.createParenthesizedExpression(n),t().SyntaxKind.GreaterThanGreaterThanToken,et.context.factory.createNumericLiteral(0))),i="int32";else if(K(it,i)){let r=8*pt[st[o]];e=et.context.factory.createCallExpression(et.context.factory.createIdentifier("Number"),void 0,[et.context.factory.createBinaryExpression(n,t().SyntaxKind.AmpersandToken,et.context.factory.createBigIntLiteral(`0x${new Array(r>>>2).fill("f").join("")}n`))]),i=`uint${r}`}return pt[st[i]]>1&&1===pt[st[o]]?(e=et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral("0xff",t().TokenFlags.HexSpecifier))),i="uint8"):pt[st[i]]>2&&2===pt[st[o]]&&(e=et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral("0xffff",t().TokenFlags.HexSpecifier))),i="uint16"),K(ot,i)&&!K(ot,o)?e=1===pt[st[o]]?et.context.factory.createConditionalExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral("0x80",t().TokenFlags.HexSpecifier))),et.context.factory.createToken(t().SyntaxKind.QuestionToken),et.context.factory.createPrefixUnaryExpression(t().SyntaxKind.MinusToken,et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(et.context.factory.createNumericLiteral("0x100",t().TokenFlags.HexSpecifier),t().SyntaxKind.MinusToken,e))),et.context.factory.createToken(t().SyntaxKind.ColonToken),e):2===pt[st[o]]?et.context.factory.createConditionalExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral("0x80000",t().TokenFlags.HexSpecifier))),et.context.factory.createToken(t().SyntaxKind.QuestionToken),et.context.factory.createPrefixUnaryExpression(t().SyntaxKind.MinusToken,et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(et.context.factory.createNumericLiteral("0x10000",t().TokenFlags.HexSpecifier),t().SyntaxKind.MinusToken,e))),et.context.factory.createToken(t().SyntaxKind.ColonToken),e):et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.GreaterThanGreaterThanToken,et.context.factory.createNumericLiteral(0))):!K(ot,i)&&K(ot,o)&&(e=1===pt[st[o]]?et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral("0xff",t().TokenFlags.HexSpecifier))):2===pt[st[o]]?et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral("0xffff",t().TokenFlags.HexSpecifier))):et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(e,t().SyntaxKind.GreaterThanGreaterThanGreaterThanToken,et.context.factory.createNumericLiteral(0)))),t().isBinaryExpression(e)&&(e=et.context.factory.createParenthesizedExpression(e)),e}if(K(it,o)){let e=n;const r=pt[st[i]];return K(nt,i)&&(e=et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.context.factory.createIdentifier("Math"),et.context.factory.createIdentifier("floor")),void 0,[e]),e=et.context.factory.createCallExpression(et.context.factory.createIdentifier("BigInt"),void 0,[e]),i="int64"),K(ct,i)&&(K(ot,i)||(e=et.context.factory.createBinaryExpression(e,t().SyntaxKind.GreaterThanGreaterThanGreaterThanToken,et.context.factory.createNumericLiteral(0))),e=et.context.factory.createCallExpression(et.context.factory.createIdentifier("BigInt"),void 0,[e]),i="uint64"),K(ot,i)&&!K(ot,o)&&8===r?e=et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.context.factory.createIdentifier("BigInt"),et.context.factory.createIdentifier("asIntN")),void 0,[et.context.factory.createNumericLiteral(64),e]):!K(ot,i)&&K(ot,o)&&(e=et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.context.factory.createIdentifier("BigInt"),et.context.factory.createIdentifier("asUintN")),void 0,[et.context.factory.createNumericLiteral(64),e])),t().isBinaryExpression(e)&&(e=et.context.factory.createParenthesizedExpression(e)),e}if(K(nt,o)){let e=n;return K(it,i)&&(e=et.context.factory.createCallExpression(et.context.factory.createIdentifier("Number"),void 0,[e])),t().isBinaryExpression(e)&&(e=et.context.factory.createParenthesizedExpression(e)),e}return et.context.factory.createParenthesizedExpression(n)}if(n===G&&!et.lookupFunc(G))return t().visitNode(e.arguments[0],r);if(n===me&&!et.lookupFunc(me)&&1===e.arguments.length&&t().isIdentifier(e.arguments[0]))return yr(e.arguments[0].escapedText,e);if(n===z&&!et.lookupFunc(z))return t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,e.arguments),r);if(n===Ke&&!et.lookupFunc(Ke))return t().visitNode(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.addIdentifierImport(Oe,we,!1),et.context.factory.createIdentifier(Ke)),void 0,e.arguments),r);if(n===Fe&&!et.lookupFunc(Fe))return t().visitNode(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.addIdentifierImport(Oe,we,!1),et.context.factory.createIdentifier(Fe)),void 0,e.arguments),r);if(n===_e&&!et.lookupFunc(_e))return t().visitNode(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.addIdentifierImport(Oe,we,!1),et.context.factory.createIdentifier(_e)),void 0,e.arguments),r);if(n===Be&&!et.lookupFunc(Be))return t().visitNode(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.addIdentifierImport(Oe,we,!1),et.context.factory.createIdentifier("alignedAlloc")),void 0,e.arguments),r);if(n===De&&!et.lookupFunc(De))return t().visitNode(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.addIdentifierImport(Oe,we,!1),et.context.factory.createIdentifier(De)),void 0,e.arguments),r);if(n===Ce&&!et.lookupFunc(Ce))return et.context.factory.createCallExpression(et.addIdentifierImport(Ce,Me,!0),void 0,e.arguments);if(n===Pe&&!et.lookupFunc(Pe))return et.context.factory.createCallExpression(et.addIdentifierImport(Pe,ze,!0),void 0,e.arguments)}else{const t=e.arguments[0];let r=et.typeChecker.getTypeAtLocation(t);if(r){const t=mr(r);return t?et.context.factory.createNumericLiteral(t):et.context.factory.createCallExpression(et.addIdentifierImport(M,X,!0),void 0,e.arguments)}}else if(t().isPropertyAccessExpression(e.expression)&&n===$){const n=et.typeChecker.getTypeAtLocation(e.expression.expression);if(wt(n)&&e.arguments[0]){let i=t().visitNode(e.expression.expression,r);if(Mt(n)){const o=jt(n);if(o){let n=null;return t().isNumericLiteral(e.arguments[0])?+e.arguments[0].text&&(n=et.context.factory.createNumericLiteral(+e.arguments[0].text*o.length)):n=et.context.factory.createBinaryExpression(t().visitNode(e.arguments[0],r),t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(o.length)),i=n?et.context.factory.createBinaryExpression(i,t().SyntaxKind.PlusToken,n):i,dr(i,o)}}else if(_t(n)){const o=Gt(n),a=pt[o];if(a){let n=null;return t().isNumericLiteral(e.arguments[0])?+e.arguments[0].text&&(n=et.context.factory.createNumericLiteral(+e.arguments[0].text*a)):n=et.context.factory.createBinaryExpression(t().visitNode(e.arguments[0],r),t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(a)),i=n?et.context.factory.createBinaryExpression(i,t().SyntaxKind.PlusToken,n):i,function(e,t){return et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),t),void 0,[e])}(i,o)}}}}return t().visitEachChild(e,r,et.context)}function gr(e,r,n){let i=!1;n===t().SyntaxKind.EqualsToken&&(et.pushStage(Je.EqualLeft),i=!0);const o=t().visitNode(e,r);return i&&et.popStage(),o}function vr(e,r,n){let i=!1;n===t().SyntaxKind.EqualsToken&&(et.pushStage(Je.EqualRight),i=!0);const o=t().visitNode(e,r);return i&&et.popStage(),o}function Er(e,r,n){if(n[5]){let i=0,o=8*pt[n[0]];for(let e=0;e<n[6];e++)i|=1<<o-1-(e+n[8]);let a=et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),n[0]),void 0,[e]);const s=Math.pow(2,n[6])-1,c=o-n[8]-n[6];r=et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(r,t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral(s))),r=et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(r,t().SyntaxKind.LessThanLessThanToken,et.context.factory.createNumericLiteral(c))),a=et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(a,t().SyntaxKind.AmpersandToken,et.context.factory.createPrefixUnaryExpression(t().SyntaxKind.TildeToken,et.context.factory.createNumericLiteral(i)))),r=et.context.factory.createBinaryExpression(a,t().SyntaxKind.BarToken,r)}return et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(U),n[1]?20:n[0]),void 0,[e,r])}function Tr(e,r){if(e.operatorToken.kind===t().SyntaxKind.EqualsToken&&t().isBinaryExpression(e.right)&&e.right.operatorToken.kind===t().SyntaxKind.EqualsToken&&(Zt(e.right)||Zt(e.left))){const n=Ht(e);let i=et.context.factory.createBinaryExpression(e.left,t().SyntaxKind.EqualsToken,n),o=e.right;for(;o&&t().isBinaryExpression(o)&&o.operatorToken.kind===t().SyntaxKind.EqualsToken;)i=et.context.factory.createBinaryExpression(i,t().SyntaxKind.CommaToken,et.context.factory.createBinaryExpression(o.left,t().SyntaxKind.EqualsToken,n)),o=o.right;return t().visitEachChild(i,r,et.context)}if(Zt(e.left)&&((i=e.operatorToken.kind)===t().SyntaxKind.PlusEqualsToken||i===t().SyntaxKind.MinusEqualsToken||i===t().SyntaxKind.AsteriskEqualsToken||i===t().SyntaxKind.AsteriskAsteriskEqualsToken||i===t().SyntaxKind.SlashEqualsToken||i===t().SyntaxKind.PercentEqualsToken||i===t().SyntaxKind.LessThanLessThanEqualsToken||i===t().SyntaxKind.GreaterThanGreaterThanEqualsToken||i===t().SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken||i===t().SyntaxKind.AmpersandEqualsToken||i===t().SyntaxKind.BarEqualsToken||i===t().SyntaxKind.CaretEqualsToken))return t().visitNode(et.context.factory.createBinaryExpression(e.left,t().SyntaxKind.EqualsToken,et.context.factory.createBinaryExpression(e.left,function(e){switch(e){case t().SyntaxKind.PlusEqualsToken:return t().SyntaxKind.PlusToken;case t().SyntaxKind.MinusEqualsToken:return t().SyntaxKind.MinusToken;case t().SyntaxKind.AsteriskEqualsToken:return t().SyntaxKind.AsteriskToken;case t().SyntaxKind.AsteriskAsteriskEqualsToken:return t().SyntaxKind.AsteriskAsteriskToken;case t().SyntaxKind.SlashEqualsToken:return t().SyntaxKind.SlashToken;case t().SyntaxKind.PercentEqualsToken:return t().SyntaxKind.PercentToken;case t().SyntaxKind.LessThanLessThanEqualsToken:return t().SyntaxKind.LessThanLessThanToken;case t().SyntaxKind.GreaterThanGreaterThanEqualsToken:return t().SyntaxKind.GreaterThanGreaterThanToken;case t().SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken:return t().SyntaxKind.GreaterThanGreaterThanGreaterThanToken;case t().SyntaxKind.AmpersandEqualsToken:return t().SyntaxKind.AmpersandToken;case t().SyntaxKind.BarEqualsToken:return t().SyntaxKind.BarToken;case t().SyntaxKind.CaretEqualsToken:return t().SyntaxKind.CaretToken;default:return t().SyntaxKind.EqualsToken}}(e.operatorToken.kind),e.right)),r);if(e.operatorToken.kind===t().SyntaxKind.EqualsToken)return function(e,r){if(t().isIdentifier(e.left)&&t().isIdentifier(e.right))return t().visitEachChild(e,r,et.context);if(t().isPropertyAccessExpression(e.left)&&Wt(e.left)&&t().isObjectLiteralExpression(e.right)&&Bt(et.typeChecker.getTypeAtLocation(e.left))){const s=[],c=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.left]),r);function l(e,r,n){n.forEach((n=>{if(t().isPropertyAssignment(n)&&t().isIdentifier(n.name)){const i=fr(r,n.name.escapedText);t().isObjectLiteralExpression(n.initializer)&&i.getTypeMeta?l(e+i[7],i.getTypeMeta(),n.initializer.properties):m(i[0])?s.push(Er(t().isBinaryExpression(c)&&t().isNumericLiteral(c.right)&&c.operatorToken.kind===t().SyntaxKind.PlusToken?et.context.factory.createBinaryExpression(c.left,t().SyntaxKind.PlusToken,et.context.factory.createNumericLiteral(i[7]+e+ +c.right.text)):et.context.factory.createBinaryExpression(c,t().SyntaxKind.PlusToken,et.context.factory.createNumericLiteral(i[7]+e)),n.initializer,i)):ur(et.currentFile,n,"struct found invalid property value")}else ur(et.currentFile,n,"struct found invalid property ")}))}if(l(0,zt(et.typeChecker.getTypeAtLocation(e.left)),e.right.properties),0===s.length)return;if(1===s.length)return s[0];{let u=s[0];for(let p=1;p<s.length;p++)u=et.context.factory.createBinaryExpression(u,t().SyntaxKind.CommaToken,s[p]);return u}}if((t().isPropertyAccessExpression(e.left)||t().isElementAccessExpression(e.left))&&Wt(e.left.expression)){var n,i,o,a;const f=et.typeChecker.getTypeAtLocation(e.left),y=et.typeChecker.getTypeAtLocation(e.right);et.pushStage(Je.AddressOf);const x=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.left]),r);if(et.popStage(),Bt(f)&&Kt(f,y)||f.aliasSymbol&&(f.aliasSymbol.escapedName===de||f.aliasSymbol.escapedName===xe)&&f.aliasTypeArguments&&y.aliasTypeArguments&&Pt(f.aliasTypeArguments[0].symbol)&&Kt(f.aliasTypeArguments[0],y.aliasTypeArguments[0])){const d=zt(f),h=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.right]),r);return et.context.factory.createCallExpression(et.addMemoryImport(w),void 0,[x,h,et.context.factory.createNumericLiteral(d.length)])}if(Ft(f)||f.aliasSymbol&&f.aliasSymbol.escapedName===le||null!==(n=f.symbol)&&void 0!==n&&n.valueDeclaration&&(t().isEnumDeclaration(f.symbol.valueDeclaration)||t().isEnumMember(f.symbol.valueDeclaration))||f.isUnion()&&null!==(i=f.types[0])&&void 0!==i&&null!==(i=i.symbol)&&void 0!==i&&i.valueDeclaration&&(t().isEnumDeclaration(null===(o=f.types[0])||void 0===o||null===(o=o.symbol)||void 0===o?void 0:o.valueDeclaration)||t().isEnumMember(null===(a=f.types[0])||void 0===a||null===(a=a.symbol)||void 0===a?void 0:a.valueDeclaration))){let g=vr(e.right,r,e.operatorToken.kind);if(t().isPropertyAccessExpression(e.left)){const v=zt(et.typeChecker.getTypeAtLocation(e.left.expression));if(null===v)return ur(et.currentFile,e,`${e.left.expression.getText()} is not struct`),e;const E=fr(v,e.left.name.escapedText);return E?Er(x,g,E):(ur(et.currentFile,e,`struct ${v.symbol.escapedName} not has property ${e.left.name.escapedText}`),e)}if(t().isElementAccessExpression(e.left)&&Ft(f))return et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(U),$t(f)),void 0,[x,g])}}return et.context.factory.createBinaryExpression(gr(e.left,r,e.operatorToken.kind),t().SyntaxKind.EqualsToken,vr(e.right,r,e.operatorToken.kind))}(e,r);if(e.operatorToken.kind===t().SyntaxKind.LessThanToken&&t().isPrefixUnaryExpression(e.right)&&e.right.operator===t().SyntaxKind.MinusToken)return function(e,r){if(t().isPrefixUnaryExpression(e.right)){if(e.parent&&t().isExpressionStatement(e.parent)&&(t().isCallExpression(e.left)&&(t().isIdentifier(e.left.expression)&&e.left.expression.escapedText===B||t().isPropertyAccessExpression(e.left.expression)&&e.left.expression.name.escapedText===$&&Zt(e.left.expression.expression))||t().isElementAccessExpression(e.left)&&Qt(e.left))){const i=et.typeChecker.getTypeAtLocation(e.left),o=et.typeChecker.getTypeAtLocation(e.right.operand);if(Kt(i,o)||wt(i)&&(n=o).aliasSymbol&&n.aliasSymbol.escapedName===fe){let n=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.left]),r);if(Bt(i)){const o=zt(i);et.pushStage(Je.SingleArrowRight);const a=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.right.operand]),r);return et.popStage(),et.context.factory.createCallExpression(et.addMemoryImport(w),void 0,[n,a,et.context.factory.createNumericLiteral(o.length)])}if(Ft(i)){const o=$t(i);et.pushStage(Je.SingleArrowRight);const a=t().visitNode(e.right.operand,r);return et.popStage(),et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(U),o),void 0,[n,a])}return ur(et.currentFile,e,"operator '<-' only allowed between two builtin type or struct type"),e}return ur(et.currentFile,e,"The types on the left and right sides of the operator '<-' are not equal"),e}{const n=et.typeChecker.getTypeAtLocation(e.left),i=et.typeChecker.getTypeAtLocation(e.right.operand);if(Bt(n)&&Kt(n,i)){const i=zt(n);et.pushStage(Je.SingleArrowRight);const o=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.right.operand]),r);et.popStage();const a=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.left]),r);return et.context.factory.createCallExpression(et.addMemoryImport(w),void 0,[a,o,et.context.factory.createNumericLiteral(i.length)])}}}var n;return t().visitEachChild(e,r,et.context)}(e,r);if((e.operatorToken.kind===t().SyntaxKind.PlusToken||e.operatorToken.kind===t().SyntaxKind.MinusToken)&&!et.lookupStage(Je.PointerPlusMinusIgnore)){var n;const i=et.typeChecker.getTypeAtLocation(e.left),o=et.typeChecker.getTypeAtLocation(e.right);if(wt(i)&&(t().isNumericLiteral(e.right)||o.flags&t().TypeFlags.Number||K(ct,qt(o)))){let n=1;if(Mt(i)?n=jt(i).length:_t(i)&&(n=pt[Gt(i)]),n>1){const i=vr(e.right,r,e.operatorToken.kind);return et.context.factory.createBinaryExpression(gr(e.left,r,e.operatorToken.kind),e.operatorToken.kind,t().isNumericLiteral(e.right)?et.context.factory.createNumericLiteral(+i.text*n):et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(i,t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(n))))}}else if(wt(o)&&(t().isNumericLiteral(e.left)||i.flags&t().TypeFlags.Number||K(ct,null===(n=i.aliasSymbol)||void 0===n?void 0:n.escapedName))){let n=1;if(_t(o)?n=pt[Gt(o)]:Mt(o)&&(n=jt(o).length),n>1){const i=vr(e.left,r,e.operatorToken.kind);return et.context.factory.createBinaryExpression(t().isNumericLiteral(e.right)?et.context.factory.createNumericLiteral(+i.text*n):et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(i,t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(n))),e.operatorToken.kind,gr(e.right,r,e.operatorToken.kind))}}else if(wt(i)&&wt(o))if(e.operatorToken.kind===t().SyntaxKind.MinusToken&&Kt(i,o)){let n=1;if(_t(i)?n=pt[Gt(i)]:Mt(i)&&(n=jt(i).length),n>1){if(n&n-1)return et.context.factory.createBinaryExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(gr(e.left,r,e.operatorToken.kind),e.operatorToken.kind,vr(e.right,r,e.operatorToken.kind))),t().SyntaxKind.SlashToken,et.context.factory.createNumericLiteral(n))),t().SyntaxKind.GreaterThanGreaterThanGreaterThanToken,et.context.factory.createNumericLiteral(0));{let i=0;for(;n>1;)i++,n>>>=1;return et.context.factory.createBinaryExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(gr(e.left,r,e.operatorToken.kind),e.operatorToken.kind,vr(e.right,r,e.operatorToken.kind))),t().SyntaxKind.GreaterThanGreaterThanGreaterThanToken,et.context.factory.createNumericLiteral(i))}}}else ur(et.currentFile,e,"The operation between two pointer types only allowed subtraction")}var i;return t().visitEachChild(e,r,et.context)}function Sr(e){if(t().isBinaryExpression(e)){if(t().isNumericLiteral(e.left)&&t().isNumericLiteral(e.right)){const o=(r=+e.left.text,n=+e.right.text,(i=e.operatorToken.kind)===t().SyntaxKind.PlusToken?r+n:i===t().SyntaxKind.MinusToken?r-n:i===t().SyntaxKind.AsteriskToken?r*n:i===t().SyntaxKind.AsteriskAsteriskToken?r**n:i===t().SyntaxKind.SlashToken?r/n:i===t().SyntaxKind.PercentToken?r%n:i===t().SyntaxKind.LessThanLessThanToken?r<<n:i===t().SyntaxKind.GreaterThanGreaterThanToken?r>>n:i===t().SyntaxKind.GreaterThanGreaterThanGreaterThanToken?r>>>n:i===t().SyntaxKind.AmpersandToken?r&n:i===t().SyntaxKind.BarToken?r|n:void 0);if(m(o))return et.context.factory.createNumericLiteral(o)}if(e.operatorToken.kind===t().SyntaxKind.PlusToken){if(t().isNumericLiteral(e.right)&&"0"===e.right.text)return e.left;if(t().isNumericLiteral(e.left)&&"0"===e.left.text)return e.right}if(e.operatorToken.kind===t().SyntaxKind.MinusToken&&t().isNumericLiteral(e.right)&&"0"===e.right.text)return e.left;if(e.operatorToken.kind===t().SyntaxKind.AsteriskToken){if(t().isNumericLiteral(e.right)&&"1"===e.right.text)return e.left;if(t().isNumericLiteral(e.left)&&"1"===e.left.text)return e.right;if(t().isNumericLiteral(e.right)&&"0"===e.right.text)return e.right;if(t().isNumericLiteral(e.left)&&"0"===e.left.text)return e.left}if(e.operatorToken.kind===t().SyntaxKind.SlashToken){if(t().isNumericLiteral(e.right)&&"1"===e.right.text)return e.left;if(t().isNumericLiteral(e.left)&&"0"===e.left.text)return e.left}}var r,n,i;return t().visitEachChild(e,Sr,et.context)}const kr=require("child_process"),Nr=3e4,br=require("fs"),Lr="__cheap__transformer_tmp.wat",Ir="__cheap__transformer_tmp.wasm";function Ar(e,r){var n;return t().isBinaryExpression(e)?function(e,r){let n=Tr(e,r);return t().isBinaryExpression(n)?Sr(n):n}(e,r):t().isPrefixUnaryExpression(e)||t().isPostfixUnaryExpression(e)?function(e,r){if(t().isPrefixUnaryExpression(e)&&Zt(e.operand)){var n;const i=et.typeChecker.getTypeAtLocation(e.operand);let o=1;wt(i)&&(_t(i)?o=pt[Gt(i)]:Mt(i)&&(o=jt(i).length));const a=K(it,null===(n=i.aliasSymbol)||void 0===n?void 0:n.escapedName)?et.context.factory.createBigIntLiteral({negative:!1,base10Value:pr(o)}):et.context.factory.createNumericLiteral(o);if(e.operator===t().SyntaxKind.PlusPlusToken)return t().isExpressionStatement(e.parent)?t().visitNode(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.PlusEqualsToken,a),r):t().visitNode(et.context.factory.createBinaryExpression(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.PlusEqualsToken,a),t().SyntaxKind.CommaToken,e.operand),r);if(e.operator===t().SyntaxKind.MinusMinusToken)return t().isExpressionStatement(e.parent)?t().visitNode(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.MinusEqualsToken,a),r):t().visitNode(et.context.factory.createBinaryExpression(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.MinusEqualsToken,a),t().SyntaxKind.CommaToken,e.operand),r);if(e.operator!==t().SyntaxKind.ExclamationToken)return ur(et.currentFile,e,"The unary operation width pointer only allowed ++ -- !"),e}else if(t().isPostfixUnaryExpression(e)&&Zt(e.operand)){const n=et.typeChecker.getTypeAtLocation(e.operand);let i=1;wt(n)&&(_t(n)?i=pt[Gt(n)]:Mt(n)&&(i=jt(n).length));const o=K(it,qt(n))?et.context.factory.createBigIntLiteral({negative:!1,base10Value:pr(i)}):et.context.factory.createNumericLiteral(i);if(e.operator===t().SyntaxKind.PlusPlusToken)return t().isExpressionStatement(e.parent)?t().visitNode(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.PlusEqualsToken,o),r):t().visitNode(et.context.factory.createBinaryExpression(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.PlusEqualsToken,o),t().SyntaxKind.CommaToken,et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.MinusToken,o)),r);if(e.operator===t().SyntaxKind.MinusMinusToken)return t().isExpressionStatement(e.parent)?t().visitNode(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.MinusEqualsToken,o),r):t().visitNode(et.context.factory.createBinaryExpression(et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.MinusEqualsToken,o),t().SyntaxKind.CommaToken,et.context.factory.createBinaryExpression(e.operand,t().SyntaxKind.PlusToken,o)),r)}return t().visitEachChild(e,r,et.context)}(e,r):t().isCallExpression(e)?hr(e,r):t().isPropertyAccessExpression(e)?function(e,r){var n;if(Zt(e)&&(null===(n=et.getCurrentStage())||void 0===n?void 0:n.stage)!==Je.EqualLeft){let n=Xt(e),c=n,l=n.parent,u=!1,p=Zt(n);for(;l!==e;){var i;const r=et.typeChecker.getTypeAtLocation(n);if(u||wt(r)||(null===(i=r.aliasSymbol)||void 0===i?void 0:i.escapedName)===ce){var o;let n=u?Ct(r.symbol):wt(r)?jt(r):wt(r.aliasTypeArguments[0])?null:zt(r.aliasTypeArguments[0]);if(n)if(t().isPropertyAccessExpression(l)){if(t().isCallExpression(l.parent)){l=l.parent;continue}{const t=fr(n,l.name.escapedText);if(!t)return ur(et.currentFile,e,`struct ${n.symbol.escapedName} not has property ${l.name.escapedText}`),e;t[1]&&!t[3]?c=et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),20),void 0,[t[7]?rr(c,et.context.factory.createNumericLiteral(t[7])):c]):t[7]&&(c=rr(c,et.context.factory.createNumericLiteral(t[7])))}u=!1}else t().isCallExpression(l)?(t().isNumericLiteral(l.arguments[0])&&0!=+l.arguments[0].text?c=rr(c,et.context.factory.createNumericLiteral(+l.arguments[0].text*n.length)):t().isNumericLiteral(l.arguments[0])||(c=et.context.factory.createBinaryExpression(c,t().SyntaxKind.PlusToken,et.context.factory.createBinaryExpression(l.arguments[0],t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(n.length)))),u=!0,p=!0):t().isElementAccessExpression(l)&&(t().isNumericLiteral(l.argumentExpression)&&0!=+l.argumentExpression.text?c=rr(c,et.context.factory.createNumericLiteral(+l.argumentExpression.text*n.length)):t().isNumericLiteral(l.argumentExpression)||(c=et.context.factory.createBinaryExpression(c,t().SyntaxKind.PlusToken,et.context.factory.createBinaryExpression(l.argumentExpression,t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(n.length)))),u=!0,p=!0);else if(((null===(o=r.aliasSymbol)||void 0===o?void 0:o.escapedName)===ce||wt(r))&&wt(r.aliasTypeArguments[0])&&t().isElementAccessExpression(l))t().isNumericLiteral(l.argumentExpression)&&0!=+l.argumentExpression.text?c=rr(c,et.context.factory.createNumericLiteral(+l.argumentExpression.text*pt[20])):t().isNumericLiteral(l.argumentExpression)||(c=et.context.factory.createBinaryExpression(c,t().SyntaxKind.PlusToken,et.context.factory.createBinaryExpression(l.argumentExpression,t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(pt[20])))),c=et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),20),void 0,[c]),p=!0;else{if(!(wt(r)&&t().isPropertyAccessExpression(l)&&l.name.escapedText===$&&t().isCallExpression(l.parent)))return ur(et.currentFile,e,"invalid pointer operate"),e;{l=l.parent;let n=0;if(wt(r.aliasTypeArguments[0]))n=pt[20];else{const t=zt(r.aliasTypeArguments[0]);if(!t)return ur(et.currentFile,e,"the pointer type only allowed in builtin type or struct type"),e;n=t.length}t().isNumericLiteral(l.arguments[0])&&0!=+l.arguments[0].text?c=rr(c,et.context.factory.createNumericLiteral(+l.arguments[0].text*n)):t().isNumericLiteral(l.arguments[0])||(c=et.context.factory.createBinaryExpression(c,t().SyntaxKind.PlusToken,et.context.factory.createBinaryExpression(l.arguments[0],t().SyntaxKind.AsteriskToken,et.context.factory.createNumericLiteral(n)))),wt(r.aliasTypeArguments[0])&&(c=et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),20),void 0,[c])),u=!0,p=!0}}}else{let n=zt(r);if(n&&p&&t().isPropertyAccessExpression(l)){const t=fr(n,l.name.escapedText);if(!t)return ur(et.currentFile,e,`struct ${n.symbol.escapedName} not has property ${l.name.escapedText}`),e;t[1]&&!t[3]?c=et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),20),void 0,[t[7]?rr(c,et.context.factory.createNumericLiteral(t[7])):c]):t[7]&&(c=rr(c,et.context.factory.createNumericLiteral(t[7]))),u=!1}else c=l}n=l,l=l.parent}if(!Zt(n)&&!p)return e;const f=et.typeChecker.getTypeAtLocation(n);let y=wt(f)?jt(f):zt(f);if(!y)return ur(et.currentFile,e,"struct type mismatch"),e;const d=fr(y,e.name.escapedText);if(!d)return ur(et.currentFile,e,`struct ${y.symbol.escapedName} not has property ${e.name.escapedText}`),e;if(et.pushStage(Je.PointerPlusMinusIgnore),c=t().visitNode(c,r),et.popStage(),d[1])return c=et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),20),void 0,[d[7]?rr(c,et.context.factory.createNumericLiteral(d[7])):c]),c;if(m(d[0])&&!x(d.getTypeMeta)){if(c=et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),d[0]),void 0,[d[7]?rr(c,et.context.factory.createNumericLiteral(d[7])):c]),d[5]&&!et.lookupStage(Je.AddressOf)){const e=8*pt[d[0]]-d[8]-d[6],r=Math.pow(2,d[6])-1;c=et.context.factory.createBinaryExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createBinaryExpression(c,t().SyntaxKind.GreaterThanGreaterThanGreaterThanToken,et.context.factory.createNumericLiteral(e))),t().SyntaxKind.AmpersandToken,et.context.factory.createNumericLiteral(r))}return c}if(!x(d.getTypeMeta))return ur(et.currentFile,e,"struct type mismatch"),e;{var a;const e=d.getTypeMeta();let t=e.symbol,r="";e.structType===St.INLINE_OBJECT&&(t=e.definedClassParent.symbol,r=e.definedClassParent.inlineStructPathMap.get(e.symbol));const n=null===(a=t.valueDeclaration)||void 0===a?void 0:a.getSourceFile();if(n){let e;var s;e=n!==et.currentFile?et.addIdentifierImport(t.escapedName,ar(et.currentFile.fileName,n.fileName),!(null!==(s=et.typeChecker.getSymbolAtLocation(n).exports)&&void 0!==s&&s.has(t.escapedName))):et.context.factory.createIdentifier(t.escapedName);const i=[d[7]?rr(c,et.context.factory.createNumericLiteral(d[7])):c,e];return r&&i.push(et.context.factory.createStringLiteral(r)),et.context.factory.createCallExpression(et.addIdentifierImport(R,ne,!0),void 0,i)}}}return t().visitEachChild(e,r,et.context)}(e,r):t().isElementAccessExpression(e)?function(e,r){const n=et.typeChecker.getTypeAtLocation(e.expression);if(Qt(e)&&(!n.aliasSymbol||n.aliasSymbol.escapedName!==ce))return t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(B),void 0,[et.context.factory.createBinaryExpression(e.expression,t().SyntaxKind.PlusToken,e.argumentExpression)]),r);if(t().isPropertyAccessExpression(e.expression)&&Zt(e.expression.expression)||t().isElementAccessExpression(e.expression)&&Zt(e.expression)){const n=et.typeChecker.getTypeAtLocation(e);let a=t().visitNode(et.context.factory.createCallExpression(et.context.factory.createIdentifier(D),void 0,[e.expression]),r);if(!Bt(n))return Ft(n)?(t().isNumericLiteral(e.argumentExpression)&&0==+e.argumentExpression.text||(a=et.context.factory.createBinaryExpression(a,t().SyntaxKind.PlusToken,t().isNumericLiteral(e.argumentExpression)?et.context.factory.createNumericLiteral(pt[$t(n)]*+e.argumentExpression.text):et.context.factory.createBinaryExpression(et.context.factory.createNumericLiteral(pt[$t(n)]),t().SyntaxKind.AsteriskToken,et.context.factory.createParenthesizedExpression(e.argumentExpression)))),et.context.factory.createCallExpression(et.context.factory.createElementAccessExpression(et.addMemoryImport(V),$t(n)),void 0,[a])):(ur(et.currentFile,e,"struct type mismatch"),e);{var i;let r=zt(n),s=r.symbol,c="";r.structType===St.INLINE_OBJECT&&(s=r.definedClassParent.symbol,c=r.definedClassParent.inlineStructPathMap.get(r.symbol)),t().isNumericLiteral(e.argumentExpression)&&0==+e.argumentExpression.text||(a=et.context.factory.createBinaryExpression(a,t().SyntaxKind.PlusToken,t().isNumericLiteral(e.argumentExpression)?et.context.factory.createNumericLiteral(r.length*+e.argumentExpression.text):et.context.factory.createBinaryExpression(et.context.factory.createNumericLiteral(r.length),t().SyntaxKind.AsteriskToken,et.context.factory.createParenthesizedExpression(e.argumentExpression))));const l=null===(i=s.valueDeclaration)||void 0===i?void 0:i.getSourceFile();if(l){let e;var o;e=l!==et.currentFile?et.addIdentifierImport(s.escapedName,ar(et.currentFile.fileName,l.fileName),!(null!==(o=et.typeChecker.getSymbolAtLocation(l).exports)&&void 0!==o&&o.has(s.escapedName))):et.context.factory.createIdentifier(s.escapedName);const t=[a,e];return c&&t.push(et.context.factory.createStringLiteral(c)),et.context.factory.createCallExpression(et.addIdentifierImport(R,ne,!0),void 0,t)}}}return t().visitEachChild(e,r,et.context)}(e,r):et.cheapCompilerOptions.defined.ENABLE_SYNCHRONIZE_API&&t().isAwaitExpression(e)&&e.expression&&t().isCallExpression(e.expression)&&(et.lookupSynchronized()||or(null===(n=et.typeChecker.getSymbolAtLocation(t().isPropertyAccessExpression(e.expression.expression)?e.expression.expression.name:e.expression.expression))||void 0===n?void 0:n.valueDeclaration))?t().visitEachChild(e.expression,r,et.context):t().isTaggedTemplateExpression(e)?function(e,r){return t().isIdentifier(e.tag)&&e.tag.escapedText===ve?function(e,r){let n="",i=r.template.getStart();if(t().isNoSubstitutionTemplateLiteral(e))n=e.text;else{e.head&&(n+=e.head.text);for(let u=0;u<e.templateSpans.length;u++){const p=e.templateSpans[u];if(!t().isStringLiteral(p.expression)&&!t().isNumericLiteral(p.expression))return ur(et.currentFile,p.expression,`expression ${p.expression.getText()} not support in asm`),et.context.factory.createStringLiteral("compile asm error");n+=p.expression.text,n+=p.literal.text}}const o=et.options.tmpPath?`${et.options.tmpPath}/`:"";o&&!t().sys.directoryExists(o)&&t().sys.createDirectory(o);const a=`${o}${Lr}`,s=`${o}${Ir}`,c=`${et.options.wat2wasm} ${a} --enable-simd --enable-threads -o ${s}`,l=`\n    (module\n      (import "env" "memory" (memory 1 32768 shared))\n      ${n}\n    )\n  `;t().sys.writeFile(a,l);try{(0,kr.execSync)(c,{stdio:"pipe"});const f=br.readFileSync(s);return et.context.factory.createStringLiteral(f.toString("base64"))}catch(y){let x=y.message.split("\n");x.shift();let d="",m=0;function h(e){let t=0;for(;e&&t<n.length;)"\n"===n[t++]&&e--;for(;t<n.length&&/\s/.test(n[t]);)t++;const r=i+t;for(;t<n.length&&"\n"!==n[t];)t++;return{start:r,end:i+t}}if(P(x,(e=>{const t=e.match(/__cheap__transformer_tmp.wat:(\d+)/);if(t){if(d){const{start:e,end:t}=h(m);ur(et.currentFile,r,d,Nr,e,t)}d=`${e.split("error: ").pop()}`,m=+t[1]-3}else e&&(d+=`\n${e}`)})),d){const{start:g,end:v}=h(m);ur(et.currentFile,r,d,Nr,g,v)}return et.context.factory.createStringLiteral("compile asm error")}}(t().visitNode(e.template,r),e):t().visitEachChild(e,r,et.context)}(e,r):t().visitEachChild(e,r,et.context)}const Cr={ENV_NODE:!1,ENABLE_THREADS:!0,ENABLE_THREADS_SPLIT:!1,DEBUG:!1,BIGINT_LITERAL:!0,CHEAP_HEAP_INITIAL:256,ENABLE_SYNCHRONIZE_API:!1,ENABLE_LOG_PATH:!0};function Pr(e,r={}){var n;r.projectPath||(r.projectPath=e.getCurrentDirectory());const i=t().findConfigFile(r.projectPath,t().sys.fileExists,"tsconfig.json"),o=i&&t().readConfigFile(i,t().sys.readFile);let a={defined:null};const s=v({},Cr);return null!=o&&null!==(n=o.config)&&void 0!==n&&n.cheap&&(v(s,o.config.cheap.defined||{}),a=v(a,o.config.cheap||{})),r.defined&&v(s,r.defined),a.defined=s,et.options=r,et.cheapCompilerOptions=a,et.program=e,et.typeChecker=e.getTypeChecker(),et.compilerOptions=e.getCompilerOptions(),e=>(et.context=e,n=>r.exclude&&r.exclude.test(n.fileName)?n:(et.start(n),et.visitor=r=>t().isBlock(r)?function(e,r){let n=Ze.UNKNOWN;e.parent&&(t().isFunctionDeclaration(e.parent)||t().isFunctionExpression(e.parent)||t().isArrowFunction(e.parent)||t().isMethodDeclaration(e.parent)?n=Ze.FUNCTION:t().isIfStatement(e.parent)?n=Ze.IF:(t().isForStatement(e.parent)||t().isForOfStatement(e.parent)||t().isWhileStatement(e.parent))&&(n=Ze.LOOP)),et.pushStack(n),et.cheapCompilerOptions.defined.ENABLE_SYNCHRONIZE_API&&e.parent&&(t().isFunctionDeclaration(e.parent)||t().isFunctionExpression(e.parent)||t().isArrowFunction(e.parent)||t().isMethodDeclaration(e.parent))&&or(e.parent)&&(et.getCurrentStack().synchronize=!0);let i=t().visitEachChild(e,r,et.context);const o=et.getCurrentStack(),a=[];return P(o.topDeclaration,(e=>{a.push(et.context.factory.createVariableStatement(void 0,et.context.factory.createVariableDeclarationList([et.context.factory.createVariableDeclaration(e.formatName,void 0,void 0,e.initializer)])))})),a.length&&(i=et.context.factory.createBlock([...a,...i.statements],!0)),et.popStack(),i}(r,et.visitor):t().isIdentifier(r)?function(e,r){var n,i;(et.lookupStage(Je.Parameter)||et.lookupStage(Je.VariableDeclaration))&&e.parent&&(t().isVariableDeclaration(e.parent)&&e.parent.name===e||t().isBindingElement(e.parent)&&e.parent.name===e||t().isParameter(e.parent)&&e.parent.name===e)&&et.getCurrentStack().locals.set(e.escapedText,et.typeChecker.getSymbolAtLocation(e));let o=e.parent;return o&&t().isAsExpression(o)&&(o=e.parent.parent),e.escapedText===at[0]&&!et.lookupLocal(e.escapedText)&&o&&(o.initializer===e||t().isBinaryExpression(o)||t().isCallExpression(o)||t().isReturnStatement(o)||t().isConditionalExpression(o)||t().isCaseClause(o)||t().isComputedPropertyName(o)||t().isArrayLiteralExpression(o)||(null===(n=et.getCurrentStage())||void 0===n?void 0:n.stage)===Je.SingleArrowRight&&!t().isTypeReferenceNode(o))?et.context.factory.createNumericLiteral(0):m(st[e.escapedText])&&!et.lookupLocal(e.escapedText)&&o&&(o.initializer===e||t().isBinaryExpression(o)||t().isCallExpression(o)||t().isReturnStatement(o)||t().isConditionalExpression(o)||t().isCaseClause(o)||t().isComputedPropertyName(o)||t().isElementAccessExpression(o)&&o.argumentExpression===e||(null===(i=et.getCurrentStage())||void 0===i?void 0:i.stage)===Je.SingleArrowRight&&!t().isTypeReferenceNode(o))?et.context.factory.createNumericLiteral(st[e.escapedText]):t().visitEachChild(e,r,et.context)}(r,et.visitor):t().isDecorator(r)?function(e,r){if(t().isIdentifier(e.expression)){const t=e.expression.escapedText;if(K(rt,t))return}else if(t().isCallExpression(e.expression)&&t().isIdentifier(e.expression.expression)){const t=e.expression.expression.escapedText;if(K(rt,t))return}return t().visitEachChild(e,r,et.context)}(r,et.visitor):r.kind===t().SyntaxKind.AsyncKeyword?function(e,r){if(!(et.cheapCompilerOptions.defined.ENABLE_SYNCHRONIZE_API&&e.parent&&(t().isFunctionDeclaration(e.parent)||t().isFunctionExpression(e.parent)||t().isArrowFunction(e.parent)||t().isMethodDeclaration(e.parent))&&or(e.parent)))return e}(r,et.visitor):t().isClassDeclaration(r)&&r.name&&t().isIdentifier(r.name)?function(e,r){const n=zt(et.typeChecker.getTypeAtLocation(e));if(n){const i=e.name.escapedText;et.hasStruct(i)||et.addStruct(i);const o=[t().visitEachChild(e,r,et.context),et.context.factory.createExpressionStatement(et.context.factory.createCallExpression(et.context.factory.createParenthesizedExpression(et.context.factory.createFunctionExpression(void 0,void 0,void 0,void 0,[et.context.factory.createParameterDeclaration(void 0,void 0,et.context.factory.createIdentifier(Ee))],void 0,et.context.factory.createBlock(sr(n),!0))),void 0,[et.context.factory.createPropertyAccessExpression(et.context.factory.createIdentifier(i),et.context.factory.createIdentifier("prototype"))]))],a=et.getDeclaration(i);return a&&o.push(et.context.factory.createExpressionStatement(et.context.factory.createBinaryExpression(et.context.factory.createIdentifier(a.formatName),t().SyntaxKind.EqualsToken,et.context.factory.createIdentifier(a.name)))),o}return t().visitEachChild(e,r,et.context)}(r,et.visitor):t().isIfStatement(r)?function(e,r){return t().visitNode(e.expression,lr)&&t().visitNode(e.expression,cr)?tr(e.expression,r)?t().visitNode(e.thenStatement,r):e.elseStatement?t().visitNode(e.elseStatement,r):void 0:t().visitEachChild(e,r,et.context)}(r,et.visitor):t().isParameter(r)?function(e,r){et.pushStage(Je.Parameter);const n=t().visitEachChild(e,r,et.context);return et.popStage(),n}(r,et.visitor):t().isVariableDeclaration(r)?function(e,r){et.pushStage(Je.VariableDeclaration);const n=t().visitEachChild(e,r,et.context);return et.popStage(),n}(r,et.visitor):t().isFunctionDeclaration(r)?function(e,r){e.name&&et.addFunc(e.name.escapedText,e),et.pushStack();let n=t().visitEachChild(e,r,et.context);return et.popStack(),n}(r,et.visitor):t().isExpressionStatement(r)?function(e,r){if(!t().isCallExpression(e.expression)||!t().isIdentifier(e.expression.expression)||e.expression.expression.escapedText!==q)return t().visitEachChild(e,r,et.context);if(et.cheapCompilerOptions.defined.DEBUG&&e.expression.arguments.length>=1){const n=t().visitEachChild(e.expression,r,et.context),i=[],{line:o}=t().getLineAndCharacterOfPosition(et.currentFile,e.getStart()),a=[et.context.factory.createStringLiteral(`[${et.currentFilePath} line: ${o+1}]`),et.context.factory.createStringLiteral(`assert [${e.expression.arguments[0].getText()}]`)];return n.arguments[1]&&a.push(n.arguments[1]),i.push(et.context.factory.createExpressionStatement(et.context.factory.createCallExpression(et.context.factory.createPropertyAccessExpression(et.context.factory.createIdentifier("console"),et.context.factory.createIdentifier("error")),void 0,a))),i.push(et.context.factory.createDebuggerStatement()),et.context.factory.createIfStatement(et.context.factory.createPrefixUnaryExpression(t().SyntaxKind.ExclamationToken,et.context.factory.createParenthesizedExpression(n.arguments[0])),et.context.factory.createBlock(i,!0))}}(r,et.visitor):t().isBigIntLiteral(r)?function(e,t){return!1===et.cheapCompilerOptions.defined.BIGINT_LITERAL?et.context.factory.createCallExpression(et.context.factory.createIdentifier("BigInt"),void 0,[et.context.factory.createNumericLiteral(e.text.replace(/n$/,""))]):e}(r,et.visitor):t().isExpression(r)?Ar(r,et.visitor):t().visitEachChild(r,et.visitor,e),et.end(t().visitEachChild(n,et.visitor,et.context))))}})(),module.exports=n})();